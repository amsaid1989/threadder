(this["webpackJsonpthreadder-frontend"]=this["webpackJsonpthreadder-frontend"]||[]).push([[0],{107:function(e,t,n){},108:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(7),i=n.n(c),o=n(19),l=n(35),s=n(152),d=n(139),u=n(148),h=n(10),f=n.n(h),m=n(65),j={main:"#283845",light:"#395164",dark:"#22303c",contrastText:"#ffffff",contrastText2:"#e5e5e5"},x={paper:j.light,default:"#202c39"},p=Object(m.a)({palette:{primary:j,secondary:{main:"#ffc107",light:"#ffd147",dark:"#c97d02",hover:"#ffa042",inactive:"#432a01",contrastText:"#14213d",inactiveText:"#111111"},background:x},spacing:4,shape:{borderRadius:2}}),b=n(149),g=n(147),O=n(146),v=n(153),w=n(143),y=n(144),N=n(145),C=n(34),T=n(140),S=n(2),I=Object(d.a)((function(e){return{styledButton:{"&:disabled":{color:e.palette.secondary.inactiveText,backgroundColor:e.palette.secondary.inactive},"&:hover":{backgroundColor:e.palette.secondary.hover}}}}));function k(e){var t=I(),n=f()(e.className,t.styledButton);return Object(S.jsx)(T.a,Object(C.a)(Object(C.a)({},e),{},{className:n}))}var F=n(151),H=n(142),L=n(154),z=n(150),W=Object(d.a)((function(e){return{menuList:{border:"solid 1px ".concat(e.palette.primary.dark)}}}));function E(e){var t={paper:W().menuList};return Object(S.jsx)(z.a,Object(C.a)({classes:t},e))}var A=n(155),G=n(63),U=n.n(G),B=n(64);n.n(B).a.config();var R=280,V="https://threadder-app.herokuapp.com/";function J(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return U()({url:e,method:t,withCredentials:!0,baseURL:V,data:n||{}})}function P(){return J("/request_token","get").then((function(e){document.location.href=e.data.redirect})).catch((function(e){return console.log(e)}))}function _(e){return J("/publish_thread","post",{tweets:e})}var Z=Object(d.a)((function(e){return{menuList:{border:"solid 1px ".concat(e.palette.primary.dark)},menuItem:{color:e.palette.primary.contrastText,"&:hover":{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main}}}}));function q(e){var t=Z(),n=Object(a.useState)(null),r=Object(o.a)(n,2),c=r[0],i=r[1],l=Object(s.a)(["user"]),d=Object(o.a)(l,1)[0],u=function(){i(null)};return Object(S.jsxs)(F.a,{children:[Object(S.jsx)(H.a,{size:"small",onClick:function(e){i(e.currentTarget)},children:Object(S.jsx)(L.a,{src:e.user.profileImage,alt:"".concat(e.user.name," profile picture")})}),Object(S.jsxs)(E,{id:"account-settings-menu",getContentAnchorEl:null,anchorEl:c,anchorReference:"anchorEl",anchorOrigin:{horizontal:"center",vertical:"bottom"},transformOrigin:{horizontal:"center",vertical:"top"},open:Boolean(c),onClose:u,autoFocus:!1,children:[Object(S.jsx)(A.a,{className:t.menuItem,onClick:function(){u();var e=d.user.screenName;document.location.href="https://twitter.com/".concat(e)},children:"Go to Twitter"}),Object(S.jsx)(A.a,{className:t.menuItem,onClick:function(){u(),J("/logout","get").then((function(){e.setLoggedOutState()})).catch((function(e){console.log(e)}))},children:"Log out"})]})]})}var D=Object(d.a)((function(e){return{toolbar:{height:"1em",padding:"1em 1.5em"},title:{flexGrow:1}}}));function M(e){var t=D(),n=Object(S.jsx)(k,{variant:"contained",color:"secondary",onClick:P,children:"Log in"});return Object(S.jsx)(w.a,{position:"relative",children:Object(S.jsxs)(y.a,{className:t.toolbar,children:[Object(S.jsx)(N.a,{variant:"h5",className:t.title,children:"Threadder"}),e.loggedIn?Object(S.jsx)(q,{user:e.user,setLoggedOutState:e.setLoggedOutState}):n]})})}var $=Object(d.a)((function(e){return{root:{flexFlow:"column nowrap"},fullHeight:{height:"100%"},containerWithShadow:{boxShadow:e.shadows[4]},expandingFlexItem:{flex:1},fixedSizeFlexItem:{flex:0},textareaContainer:{padding:"1.5em",backgroundColor:e.palette.primary.main},threadTextarea:{fontFamily:"inherit",fontSize:"inherit",resize:"none",width:"100%",padding:"0.5em 0.75em",color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,border:0,boxShadow:"inset 0px 0px 5px 0px rgba(0, 0, 0, 0.4)","&:focus":{border:0,outline:0}},statsContainer:{padding:"1em 1.5em",display:"flex",flexFlow:"row nowrap",justifyContent:"space-between",backgroundColor:e.palette.primary.dark},statsText:{color:e.palette.primary.contrastText2}}}));function K(e){var t=$();return Object(S.jsxs)(O.a,{container:!0,spacing:2,className:f()(t.root,t.fullHeight),children:[Object(S.jsx)(O.a,{item:!0,xs:12,className:f()(t.expandingFlexItem,t.fullHeight),children:Object(S.jsx)(g.a,{className:f()(t.textareaContainer,t.fullHeight,t.containerWithShadow),children:Object(S.jsx)("textarea",{className:f()(t.threadTextarea,t.fullHeight),onChange:e.handleTweetInput,placeholder:"Type your tweet here...",value:e.tweetText})})}),Object(S.jsx)(O.a,{item:!0,xs:12,className:t.fixedSizeFlexItem,children:Object(S.jsxs)(g.a,{className:f()(t.statsContainer,t.containerWithShadow),children:[Object(S.jsx)(N.a,{variant:"body2",className:t.statsText,children:"Characters: ".concat(e.tweetText.length)}),Object(S.jsx)(N.a,{variant:"body2",className:t.statsText,children:"Tweets: ".concat(e.thread.length)})]})}),Object(S.jsx)(v.a,{mdUp:!0,children:Object(S.jsx)(O.a,{item:!0,xs:12,className:t.fixedSizeFlexItem,children:Object(S.jsx)(k,{variant:"contained",color:"secondary",fullWidth:!0,onClick:e.viewThreadHandler,children:"View thread"})})})]})}var Q=Object(d.a)((function(e){return{root:{marginBottom:"1.5em",flexFlow:"row nowrap","&:last-child":{marginBottom:0}},expandingFlexItem:{flex:1},fixedSizeFlexItem:{flex:0},verticalGrid:{display:"flex",flexFlow:"column nowrap"},centerVerticalGridItems:{alignItems:"center"},threadLineContainer:{padding:0},threadLine:{width:"2px",height:"calc(100% + 1.5em)",backgroundColor:e.palette.background.default},tweetContainer:{marginLeft:"1em"},resetFont:{fontFamily:"inherit",fontSize:"inherit"},defaultTextColor:{color:e.palette.primary.contrastText},userName:{fontWeight:"bold"},userHandle:{color:e.palette.primary.contrastText2,marginLeft:"0.5em"},tweetText:{padding:0,margin:0,marginTop:"0.25em",whiteSpace:"pre-wrap",overflowWrap:"break-word"},hiddenOverflow:{overflow:"hidden"}}}));function X(e){var t=Q();return Object(S.jsxs)(O.a,{container:!0,className:t.root,children:[Object(S.jsxs)(O.a,{container:!0,className:f()(t.fixedSizeFlexItem,t.verticalGrid,t.centerVerticalGridItems),children:[Object(S.jsx)(O.a,{item:!0,children:Object(S.jsx)(L.a,{src:e.user.profileImage,alt:"".concat(e.user.name," profile picture")})}),e.threadLine&&Object(S.jsx)(O.a,{item:!0,className:f()(t.expandingFlexItem,t.threadLineContainer),children:Object(S.jsx)("div",{className:t.threadLine})})]}),Object(S.jsxs)(O.a,{container:!0,className:f()(t.expandingFlexItem,t.verticalGrid,t.tweetContainer,t.hiddenOverflow),children:[Object(S.jsxs)(O.a,{item:!0,children:[Object(S.jsx)("span",{className:f()(t.resetFont,t.defaultTextColor,t.userName),children:e.user.name}),Object(S.jsx)("span",{className:f()(t.resetFont,t.userHandle),children:"@".concat(e.user.screenName)})]}),Object(S.jsx)(O.a,{item:!0,children:Object(S.jsx)("p",{className:f()(t.resetFont,t.defaultTextColor,t.tweetText),children:e.text})})]})]})}var Y=Object(d.a)((function(e){return{root:{flexFlow:"column nowrap"},fullHeight:{height:"100%"},containerWithShadow:{boxShadow:e.shadows[4]},expandingFlexItem:{flex:1},fixedSizeFlexItem:{flex:0},autoOverflow:{overflow:"auto"},hiddenOverflow:{overflow:"hidden"},tweetsContainer:{padding:"1.5em",backgroundColor:e.palette.primary.main},buttonRowContainer:{display:"flex",flexFlow:"row nowrap",justifyContent:"space-between",gap:"1em",margin:0,padding:0}}}));function ee(e){var t=Y(),n=e.thread.map((function(t,n,a){return Object(S.jsx)(X,{user:e.user,text:t,threadLine:n+1<a.length},t)}));return Object(S.jsxs)(O.a,{container:!0,spacing:2,className:f()(t.root,t.fullHeight,t.hiddenOverflow),children:[Object(S.jsx)(O.a,{item:!0,xs:12,className:f()(t.expandingFlexItem,t.fullHeight,t.hiddenOverflow),children:Object(S.jsx)(g.a,{className:f()(t.tweetsContainer,t.fullHeight,t.containerWithShadow,t.autoOverflow),children:n})}),Object(S.jsx)(O.a,{item:!0,xs:12,className:t.fixedSizeFlexItem,children:Object(S.jsxs)(g.a,{className:f()(t.buttonRowContainer,t.fullHeight),children:[Object(S.jsx)(v.a,{mdUp:!0,children:Object(S.jsx)(k,{variant:"contained",color:"secondary",fullWidth:!0,onClick:e.editThreadHandler,children:"Edit thread"})}),Object(S.jsx)(k,{variant:"contained",color:"secondary",onClick:e.publishHandler,disabled:!n.length>0,fullWidth:!0,children:"Publish thread"})]})})]})}function te(e){return e.replace(/^[ \t]*/,"").replace(/[ \t]*$/,"")}function ne(e){return e.split(/(?<=\d*[a-zA-Z]\w+)\.(?=\s*\d*[a-zA-Z]\w*\n?)/g).filter((function(e){return""!==e})).join(". ").split(/(?<=\d*[a-zA-Z]\w+\.)\s/g).map((function(e){return te(e)}))}function ae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";if(0===e.length)return[];for(var n=[],a=0;a<e.length;a++)if(0!==a){var r=n.length-1,c=n[r],i=e[a];c.length<=70||c.length+i.length<=R?(c+=i.startsWith("\n")?i:"".concat(t).concat(i),n[r]=c):n.push(e[a])}else n.push(e[a]);return n}function re(e){return e.split("\n").filter((function(e){return""!==e}))}var ce=n(49),ie=n(43);function oe(e){if(e.length<=R)return e;for(var t=Math.ceil(e.length/277),n=[],a=0;a<t;a++){var r=277*a,c=277*(a+1),i=e.slice(r,c)+"...";n.push(i)}return n}function le(e){return"..."===e.slice(e.length-3)?e.slice(0,e.length-3):e}function se(e){for(var t=[],n=0;n<e.length;n++){var a=e[n];if(0!==n){var r=t.length-1,c=le(t[r]);c.length+a.length+1<=R?t[r]="".concat(c," ").concat(a):t.push(a)}else t.push(a)}return t}function de(e){var t=e.trim().split("(---)").map((function(e){return e.trim()})).filter((function(e){return""!==e}));if(ue(t))return t;var n=t.map((function(e){return e.length<=R?e:function(e){var t=ae(ne(e));return t.every((function(e){return e.length<=R}))?t:ae(t.map((function(e){return e.length<=R?e:re(e)})).flat().map((function(e){return e.trim()})),"\n")}(e)})).flat().map((function(e){return e.trim()}));return ue(n)?n:n.map((function(e){return e.length<=R?e:function(e){if(e.length<=R)return e;var t,n=e.split(" ").filter((function(e){return 0!==e.length})),a="",r=[],c=Object(ie.a)(n);try{for(c.s();!(t=c.n()).done;){var i=t.value.trim();i.length>R?(a.length>0&&(r.push("".concat(a,"...")),a=""),r=[].concat(Object(ce.a)(r),Object(ce.a)(oe(i)))):0===a.length?a+=i:a.length+i.length+1<277?a+=" ".concat(i):(r.push("".concat(a,"...")),a=i)}}catch(l){c.e(l)}finally{c.f()}a.length>0&&r.push(a);var o=r.length-1;return r[o]=le(r[o]),se(r)}(e)})).flat().map((function(e){return e.trim()}))}function ue(e){return e.every((function(e){return e.length<=R}))}function he(e,t){sessionStorage.setItem(e,JSON.stringify(t))}function fe(e){return JSON.parse(sessionStorage.getItem(e))}var me=Object(d.a)((function(e){return{root:{height:"100vh",maxHeight:"100vh"},gridContainer:{flexFlow:"column nowrap",height:"100%"},appHeader:{flex:0},appView:Object(l.a)({flex:1},e.breakpoints.up("md"),{display:"flex",flexFlow:"row nowrap",gap:e.spacing(1.5)}),mainArea:{height:"100%"},hiddenOverflow:{overflow:"hidden"}}}));function je(e){var t=me(),n=Object(s.a)(["user"]),r=Object(o.a)(n,1)[0],c=Object(a.useState)(!1),i=Object(o.a)(c,2),l=i[0],d=i[1],h=Object(a.useState)({name:"Untitled User",screenName:"untitled_user",profileImage:""}),m=Object(o.a)(h,2),j=m[0],x=m[1],w=Object(a.useState)(fe("tweetText")||""),y=Object(o.a)(w,2),N=y[0],C=y[1],T=Object(a.useState)([]),I=Object(o.a)(T,2),k=I[0],F=I[1],H=Object(a.useState)(!0),L=Object(o.a)(H,2),z=L[0],W=L[1],E=function(){W(!z)},A=function(){d(!1),x({name:"Untitled User",screenName:"untitled_user",profileImage:""})};return Object(a.useEffect)((function(){fe("toPublish")&&(he("toPublish",!1),_(fe("thread")))})),Object(a.useEffect)((function(){var e;void 0!==r.user&&(e=r.user,Object.entries(e).length>0)&&function(e,t){var n,a=Object.keys(e),r=Object(ie.a)(t);try{for(r.s();!(n=r.n()).done;){var c=n.value;if(!a.includes(c))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(r.user,["name","screenName","profileImage"])?(d(!0),x(r.user)):A()}),[r.user]),Object(a.useEffect)((function(){0===N.length?F([]):F(de(N)),he("tweetText",N)}),[N]),Object(a.useEffect)((function(){he("thread",k)}),[k]),Object(S.jsx)(u.a,{theme:p,children:Object(S.jsx)(b.a,{children:Object(S.jsx)(g.a,{className:t.root,children:Object(S.jsxs)(O.a,{container:!0,spacing:3,className:t.gridContainer,children:[Object(S.jsx)(O.a,{item:!0,xs:12,className:t.appHeader,children:Object(S.jsx)(M,{user:j,loggedIn:l,setLoggedOutState:A})}),Object(S.jsxs)(O.a,{item:!0,xs:12,className:f()(t.appView,t.hiddenOverflow),children:[Object(S.jsx)(v.a,{smDown:!z,children:Object(S.jsx)(O.a,{item:!0,xs:12,md:7,className:f()(t.mainArea,t.hiddenOverflow),children:Object(S.jsx)(K,{tweetText:N,handleTweetInput:function(e){var t=e.target.value;C(t)},thread:k,viewThreadHandler:E})})}),Object(S.jsx)(v.a,{smDown:z,children:Object(S.jsx)(O.a,{item:!0,xs:12,md:5,className:f()(t.mainArea,t.hiddenOverflow),children:Object(S.jsx)(ee,{user:j,thread:k,editThreadHandler:E,publishHandler:function(){l?_(k):(he("toPublish",!0),P())}})})})]})]})})})})}n(107);i.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(je,{})}),document.querySelector("#root"))}},[[108,1,2]]]);
//# sourceMappingURL=main.1aa13dc3.chunk.js.map