{"version":3,"sources":["themes/threadder-dark-theme.js","components/StyledButton.js","components/StyledMenu.js","components/LoggedInMenu.js","components/Header.js","components/CustomIconButton.js","utils/detectMobileBrowsers.js","components/InputToolbar.js","components/TweetInput.js","utils/generalConstants.js","components/TweetToolbar.js","controllers/db.js","components/TweetImage.js","utils/numUtils.js","components/Tweet.js","controllers/gridPlacement.js","components/HashtagAndMention.js","components/CustomURL.js","controllers/tweetEntitiesHandler.js","components/ThreadViewer.js","components/MessagesDialog.js","components/CustomAlert.js","utils/fullSentenceSplitter.js","utils/midSentenceSplitter.js","controllers/tweetSplitter.js","utils/objectIntegrityCheckers.js","controllers/APICalls.js","controllers/storageWrappers.js","App.js","controllers/textManip.js","serviceWorkerRegistration.js","index.js"],"names":["primaryPalette","main","light","dark","contrastText","contrastText2","backgroundPalette","paper","default","darkTheme","createMuiTheme","palette","primary","secondary","hover","inactive","inactiveText","background","spacing","shape","borderRadius","useStyles","makeStyles","theme","styledButton","color","backgroundColor","StyledButton","props","classes","joinClassNames","classNames","className","Button","menuList","border","StyledMenu","menuClasses","Menu","menuItem","LoggedInMenu","useState","anchorEl","setAnchorEl","closeMenu","Box","IconButton","size","onClick","event","currentTarget","Avatar","src","user","profileImage","alt","name","id","getContentAnchorEl","anchorReference","anchorOrigin","horizontal","vertical","transformOrigin","open","Boolean","onClose","autoFocus","MenuItem","screenName","window","logout","toolbar","height","padding","title","flexGrow","Header","logInBtn","variant","login","AppBar","position","Toolbar","Typography","loggedIn","toolbarButton","marginRight","CustomIconButton","children","isMobile","a","navigator","userAgent","vendor","opera","test","substr","root","marginTop","InputToolbar","pickerOpen","setPickerOpen","Hidden","smDown","ClickAwayListener","onClickAway","style","set","data","emoji","showPreview","perLine","onSelect","pickEmojiHandler","prevState","splitTweetHandler","clearTweetHandler","flexFlow","fullHeight","containerWithShadow","boxShadow","shadows","expandingFlexItem","flex","fixedSizeFlexItem","textareaContainer","display","paddingBottom","threadTextarea","fontFamily","fontSize","resize","width","outline","statsContainer","justifyContent","statsText","emojiPicker","TweetInput","React","forwardRef","ref","Grid","container","item","xs","Container","onChange","handleTweetInput","handleCursorPositionChange","placeholder","value","tweetText","length","thread","mdUp","fullWidth","viewThreadHandler","dotenv","config","TWEET_LENGTH","UNTITLED_NAME","gap","alignItems","imageButton","margin","left","resetFont","tweetLength","textAlign","TweetToolbar","supportedImageTypes","exceedsAllowedLimits","files","some","file","type","allFilesAreSupported","extensions","map","slice","every","ext","fileSizeAllowed","disabled","addDisabled","target","parentElement","querySelector","click","accept","join","multiple","hidden","filesArr","Array","from","setAlertData","addImagesHandler","db","minHeight","maxHeight","deleteButton","right","top","iconBackground","minWidth","maxWidth","buttonIcon","zIndex","scale","image","objectFit","TweetImage","gridColumn","gridRow","deleteImageHandler","imageIndex","imageSource","altText","onLoad","URL","revokeObjectURL","isEven","num","dbOpen","dbConnected","openDB","Promise","resolve","reject","indexedDB","openRequest","addEventListener","error","message","objectStore","createObjectStore","keyPath","indices","params","unique","forEach","index","createIndex","createStores","result","addOrUpdateImages","tweetIndex","imgArr","storeOperation","IDBDatabase","promises","arrayBuffer","buf","ArrayBuffer","buffer","all","fileObjectsToBuffers","then","buffers","transaction","store","tweetImages","request","errorHandler","catch","saveImagesToDB","modifyImagesInDB","getOrDeleteImagesFromDB","deleteImagesFromDB","indexExistsInDB","results","buffersToFileObjects","buffersArr","bufObj","File","marginBottom","verticalGrid","centerVerticalGridItems","threadLineContainer","threadLine","tweetContainer","marginLeft","defaultTextColor","userName","fontWeight","userHandle","whiteSpace","overflowWrap","imageGallery","gridTemplateColumns","gridTemplateRows","gridGap","hiddenOverflow","overflow","Tweet","images","setImages","reloadImages","setReloadImages","disableAddImages","setDisableAddImages","setTweetLength","tweetTextRef","createRef","removeImage","updatedImages","imageElements","arr","itemIndex","totalItems","colStart","colEnd","getRow","rowStart","rowEnd","key","createObjectURL","useEffect","current","innerText","checkInterval","checkTimeout","setInterval","clearInterval","reloadImagesFromDB","setTimeout","shouldDisable","err","xsUp","imagesToAdd","HashtagAndMention","text","CustomURL","href","url","rel","hashtagAndMentionRegex","urlRegex","highlightTweetEntities","tweet","output","split","flat","filter","splitTweetEntities","autoOverflow","tweetsContainer","buttonRowContainer","ThreadViewer","tweets","highlightedTweet","DOMPurify","sanitize","containerRef","useRef","scrollMaxLength","scrollHeight","clientHeight","scrollTop","Math","floor","scroll","editThreadHandler","publishHandler","dialogText","MessagesDialog","Dialog","DialogContent","DialogContentText","msg","CustomAlert","Collapse","in","visible","Alert","severity","trimTopAndTailSpaces","replace","splitAtNewlines","idx","splitAtFullstops","splitIndices","matchAll","match","push","splitIndex","combineSentencesIntoTweets","sentenceArray","combiningCharacter","outArray","i","lastSentenceIndex","lastSentence","curSentence","startsWith","recombineShortTweets","threadArray","combinedTweets","curTweet","lastTweetIndex","lastTweet","removeEllipsisFromTweet","breakVeryLongWord","word","tweetCount","ceil","splitTweets","sliceStart","sliceEnd","outWord","splitTweet","userDefinedSplits","trim","allTweetsFitLength","fullSentencesSplit","newLineSplit","breakTextAtFullSentences","sentence","splitWords","currentTweet","currentWord","breakLongSentence","checkUserObject","userObj","obj","Object","entries","keysArr","objKeys","keys","includes","containsAllKeys","sendAPIRequest","method","undefined","axios","withCredentials","baseURL","publishAllTweetImages","FormData","append","publishMedia","response","media_id","publishThread","getStorage","localStorage","sessionStorage","setStorageItem","storeName","itemName","itemValue","storage","setItem","JSON","stringify","getStorageItem","parse","getItem","gridContainer","appHeader","appView","breakpoints","up","mainArea","App","untitledUser","setDBOpen","alertVisibility","setAlertVisibility","alertSeverity","setAlertSeverity","alertMessage","setAlertMessage","dialogOpen","setDialogOpen","dialogMessage","setDialogMessage","setLoggedIn","setUser","setTweetText","start","end","cursorPosition","setCursorPosition","scrollPosition","setScrollPosition","setThread","editing","setEditing","tweetInputRef","insertTextAtCursor","cursorObj","textToAdd","insertIntoText","updatedText","newPos","toggleEditing","displayAlert","useCallback","level","loginHandler","showDialog","document","location","redirect","console","log","finally","closeDialog","publishTweets","toPublish","media","getAll","out","allImages","Number","mediaIDs","search","queryString","timeout","interval","clearTimeout","selectionStart","selectionEnd","focus","clearRequest","clear","clearImagesFromDB","closeAlertTimeout","ThemeProvider","CssBaseline","md","native","isLocalhost","hostname","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","ReactDOM","render","StrictMode","process","origin","fetch","headers","contentType","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.38dab212.chunk.js","sourcesContent":["import { createMuiTheme } from \"@material-ui/core/styles\";\n\n/*\n * Threadder's main theme\n */\n\nconst primaryPalette = {\n    main: \"#283845\",\n    light: \"#395164\",\n    dark: \"#22303c\",\n    contrastText: \"#ffffff\",\n    contrastText2: \"#e5e5e5\",\n};\n\nconst secondaryPalette = {\n    main: \"#ffc107\",\n    light: \"#ffd147\",\n    dark: \"#c97d02\",\n    hover: \"#ffa042\",\n    inactive: \"#432a01\",\n    contrastText: \"#14213d\",\n    inactiveText: \"#111111\",\n};\n\nconst backgroundPalette = {\n    paper: primaryPalette.light,\n    default: \"#202c39\",\n};\n\nconst darkTheme = createMuiTheme({\n    palette: {\n        primary: primaryPalette,\n        secondary: secondaryPalette,\n        background: backgroundPalette,\n    },\n    spacing: 4,\n    shape: {\n        borderRadius: 2,\n    },\n});\n\nexport default darkTheme;\n","import { makeStyles } from \"@material-ui/core/styles\";\nimport classNames from \"classnames\";\nimport Button from \"@material-ui/core/Button\";\n\n/**\n * A component that applies custom styling to Material UI's\n * default Button component. It passes all the props added\n * to it to the enclosed Button component.\n */\n\nconst useStyles = makeStyles((theme) => ({\n    styledButton: {\n        \"&:disabled\": {\n            color: theme.palette.secondary.inactiveText,\n            backgroundColor: theme.palette.secondary.inactive,\n        },\n        \"&:hover\": {\n            backgroundColor: theme.palette.secondary.hover,\n        },\n    },\n}));\n\nexport default function StyledButton(props) {\n    const classes = useStyles();\n\n    /**\n     * Since the custom styling is applied by passing a class\n     * to the className prop, which only accepts one class,\n     * we use the classNames NPM package to merge the custom\n     * styling class with any classes passed by someone using\n     * the component who might want to further customise its\n     * display.\n     */\n    const joinClassNames = classNames(props.className, classes.styledButton);\n\n    return <Button {...props} className={joinClassNames} />;\n}\n","import { makeStyles } from \"@material-ui/core/styles\";\nimport Menu from \"@material-ui/core/Menu\";\n\n/**\n * Component that applies custom styling to Material UI's\n * Menu component. It passes all of its props to the\n * enclosed Menu component.\n */\n\nconst useStyles = makeStyles((theme) => ({\n    menuList: {\n        border: `solid 1px ${theme.palette.primary.dark}`,\n    },\n}));\n\nexport default function StyledMenu(props) {\n    const classes = useStyles();\n\n    const menuClasses = {\n        paper: classes.menuList,\n    };\n\n    return <Menu classes={menuClasses} {...props} />;\n}\n","import { useState } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Box from \"@material-ui/core/Box\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport StyledMenu from \"./StyledMenu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\n\n/*\n * The styles and implementation of the menu component that\n * is rendered when the user is logged in to their Twitter\n * account.\n */\n\nconst useStyles = makeStyles((theme) => ({\n    menuList: {\n        border: `solid 1px ${theme.palette.primary.dark}`,\n    },\n    menuItem: {\n        color: theme.palette.primary.contrastText,\n        \"&:hover\": {\n            color: theme.palette.secondary.contrastText,\n            backgroundColor: theme.palette.secondary.main,\n        },\n    },\n}));\n\nexport default function LoggedInMenu(props) {\n    const classes = useStyles();\n\n    /* COMPONENT STATE */\n    // Generate the anchor element which will be used to trigger the menu\n    const [anchorEl, setAnchorEl] = useState(null);\n    /* END COMPONENT STATE */\n\n    /* EVENT HANDLERS */\n    const handleAvatarClick = (event) => {\n        /**\n         * This is used to set the Avatar as an anchor element for the\n         * menu. In effect, it expands the menu whenever the Avatar is\n         * clicked by the user.\n         */\n\n        // Use currentTarget instead of target to ensure that it grabs\n        // the parent div rather than any of the child elements\n        setAnchorEl(event.currentTarget);\n    };\n\n    const closeMenu = () => {\n        setAnchorEl(null);\n    };\n\n    const redirectToTwitter = () => {\n        /**\n         * Handles the click event for the Go to Twitter menu\n         * item, redirecting the logged-in user to their Twitter\n         * profile\n         */\n\n        closeMenu();\n\n        const screenName = props.user.screenName;\n\n        window.open(`https://twitter.com/${screenName}`, \"_blank\");\n\n        // document.location.href = `https://twitter.com/${screenName}`;\n    };\n\n    const logOutHandler = () => {\n        /**\n         * Handles the click event for the Logout menu item\n         */\n\n        closeMenu();\n\n        props.logout();\n    };\n    /* END EVENT HANDLERS */\n\n    return (\n        <Box>\n            <IconButton size=\"small\" onClick={handleAvatarClick}>\n                <Avatar\n                    src={props.user.profileImage}\n                    alt={`${props.user.name} profile picture`}\n                />\n            </IconButton>\n\n            <StyledMenu\n                id=\"account-settings-menu\"\n                getContentAnchorEl={null}\n                anchorEl={anchorEl}\n                anchorReference=\"anchorEl\"\n                anchorOrigin={{ horizontal: \"center\", vertical: \"bottom\" }}\n                transformOrigin={{ horizontal: \"center\", vertical: \"top\" }}\n                open={Boolean(anchorEl)}\n                onClose={closeMenu}\n                autoFocus={false}\n            >\n                <MenuItem\n                    className={classes.menuItem}\n                    onClick={redirectToTwitter}\n                >\n                    Go to Twitter\n                </MenuItem>\n\n                <MenuItem className={classes.menuItem} onClick={logOutHandler}>\n                    Log out\n                </MenuItem>\n            </StyledMenu>\n        </Box>\n    );\n}\n","import { makeStyles } from \"@material-ui/core/styles\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport StyledButton from \"./StyledButton\";\nimport LoggedInMenu from \"./LoggedInMenu\";\n\n/*\n * The styles and implementation of the app Header component.\n * It shows the app name, logo and a sign in button to allow\n * the user to log into their Twitter account.\n * When logged in, it replaces the sign in button with the\n * Twitter profile photo of the user and a menu that allows\n * them to navigate to their Twitter account directly from\n * the app or to log out.\n */\n\nconst useStyles = makeStyles((theme) => ({\n    toolbar: {\n        height: \"1em\",\n        padding: \"1em 1.5em\",\n    },\n    title: {\n        flexGrow: 1,\n    },\n}));\n\nexport default function Header(props) {\n    const classes = useStyles();\n\n    // The sign in StyledButton component\n    const logInBtn = (\n        <StyledButton\n            variant=\"contained\"\n            color=\"secondary\"\n            onClick={props.login}\n        >\n            Log in\n        </StyledButton>\n    );\n\n    return (\n        <AppBar position=\"relative\">\n            <Toolbar className={classes.toolbar}>\n                <Typography variant=\"h5\" className={classes.title}>\n                    Threadder\n                </Typography>\n                {props.loggedIn ? (\n                    <LoggedInMenu user={props.user} logout={props.logout} />\n                ) : (\n                    logInBtn\n                )}\n            </Toolbar>\n        </AppBar>\n    );\n}\n","import classNames from \"classnames\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport IconButton from \"@material-ui/core/IconButton\";\n\nconst useStyles = makeStyles((theme) => ({\n    toolbarButton: {\n        marginRight: \"0.45em\",\n        color: theme.palette.secondary.dark,\n        \"&:hover\": {\n            color: theme.palette.secondary.main,\n        },\n    },\n}));\n\nexport default function CustomIconButton(props) {\n    /**\n     * Component that applies custom styling to Material UI's\n     * IconButton, so that it can be consistently reused in\n     * different parts of the app.\n     */\n\n    const classes = useStyles();\n\n    const joinClassNames = classNames(props.className, classes.toolbarButton);\n\n    return (\n        <IconButton {...props} className={joinClassNames}>\n            {props.children}\n        </IconButton>\n    );\n}\n","export function isMobile() {\n    return (function (a) {\n        return (\n            /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(\n                a\n            ) ||\n            /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(\n                a.substr(0, 4)\n            )\n        );\n    })(navigator.userAgent || navigator.vendor || window.opera);\n}\n","import { useState } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport CustomIconButton from \"./CustomIconButton\";\nimport EmojiEmotionsIcon from \"@material-ui/icons/EmojiEmotions\";\nimport BackspaceIcon from \"@material-ui/icons/Backspace\";\nimport ViewAgendaIcon from \"@material-ui/icons/ViewAgenda\";\nimport Hidden from \"@material-ui/core/Hidden\";\nimport ClickAwayListener from \"@material-ui/core/ClickAwayListener\";\nimport data from \"emoji-mart/data/twitter.json\";\nimport { NimblePicker } from \"emoji-mart\";\nimport { isMobile } from \"../utils/detectMobileBrowsers\";\nimport \"emoji-mart/css/emoji-mart.css\";\nimport \"./emojiPicker.css\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        padding: 0,\n        marginTop: \"0.5em\",\n    },\n}));\n\nexport default function InputToolbar(props) {\n    const classes = useStyles();\n\n    const [pickerOpen, setPickerOpen] = useState(false);\n\n    const handlePickerClick = () => {\n        /**\n         * Handles the user click on the button the toggles\n         * the emoji picker.\n         */\n\n        setPickerOpen((prevState) => !prevState);\n    };\n\n    const handleClickAway = () => {\n        setPickerOpen(false);\n    };\n\n    return (\n        <div className={classes.root}>\n            {/* EMOJI BUTTON */}\n            <Hidden smDown={isMobile()}>\n                <ClickAwayListener onClickAway={handleClickAway}>\n                    <span style={{ position: \"relative\" }}>\n                        {pickerOpen && (\n                            <NimblePicker\n                                set=\"twitter\"\n                                data={data}\n                                title=\"\"\n                                emoji=\"\"\n                                showPreview={false}\n                                perLine={8}\n                                onSelect={props.pickEmojiHandler}\n                            />\n                        )}\n                        <CustomIconButton\n                            size=\"small\"\n                            onClick={handlePickerClick}\n                            title=\"Emoji\"\n                        >\n                            <EmojiEmotionsIcon />\n                        </CustomIconButton>\n                    </span>\n                </ClickAwayListener>\n            </Hidden>\n            {/* FORCE SPLIT BUTTON */}\n            <CustomIconButton\n                size=\"small\"\n                onClick={props.splitTweetHandler}\n                title=\"Split\"\n            >\n                <ViewAgendaIcon />\n            </CustomIconButton>\n            {/* CLEAR INPUT BUTTON */}\n            <CustomIconButton\n                size=\"small\"\n                onClick={props.clearTweetHandler}\n                title=\"Clear\"\n            >\n                <BackspaceIcon />\n            </CustomIconButton>\n        </div>\n    );\n}\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport classNames from \"classnames\";\nimport Container from \"@material-ui/core/Container\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Typography from \"@material-ui/core/Typography\";\nimport StyledButton from \"./StyledButton\";\nimport Hidden from \"@material-ui/core/Hidden\";\nimport InputToolbar from \"./InputToolbar\";\n\n/**\n * The styles and implementation of the tweet input component.\n * This component is where the user will input the text they\n * want to split into a thread of tweets.\n * It also shows some stats about the character count of the\n * text and how many tweets are generated from it.\n */\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        flexFlow: \"column nowrap\",\n    },\n    fullHeight: {\n        height: \"100%\",\n    },\n    containerWithShadow: {\n        boxShadow: theme.shadows[4],\n    },\n    expandingFlexItem: {\n        flex: 1,\n    },\n    fixedSizeFlexItem: {\n        flex: 0,\n    },\n    textareaContainer: {\n        display: \"flex\",\n        flexFlow: \"column nowrap\",\n        padding: \"1.5em\",\n        paddingBottom: \"0.55em\",\n        backgroundColor: theme.palette.primary.main,\n    },\n    threadTextarea: {\n        fontFamily: \"inherit\",\n        fontSize: \"inherit\",\n        resize: \"none\",\n        width: \"100%\",\n        padding: \"0.5em 0.75em\",\n        color: theme.palette.primary.contrastText,\n        backgroundColor: theme.palette.primary.main,\n        border: 0,\n        boxShadow: \"inset 0px 0px 5px 0px rgba(0, 0, 0, 0.4)\",\n        \"&:focus\": {\n            border: 0,\n            outline: 0,\n        },\n    },\n    statsContainer: {\n        padding: \"1em 1.5em\",\n        display: \"flex\",\n        flexFlow: \"row nowrap\",\n        justifyContent: \"space-between\",\n        backgroundColor: theme.palette.primary.dark,\n    },\n    statsText: {\n        color: theme.palette.primary.contrastText2,\n    },\n    emojiPicker: {\n        position: \"absolute\",\n    },\n}));\n\nconst TweetInput = React.forwardRef((props, ref) => {\n    const classes = useStyles();\n\n    return (\n        <Grid\n            container\n            spacing={2}\n            className={classNames(classes.root, classes.fullHeight)}\n        >\n            {/* GRID ITEM 01: Tweet Input Textarea and toolbar */}\n            <Grid\n                item\n                xs={12}\n                className={classNames(\n                    classes.expandingFlexItem,\n                    classes.fullHeight\n                )}\n            >\n                <Container\n                    className={classNames(\n                        classes.textareaContainer,\n                        classes.fullHeight,\n                        classes.containerWithShadow\n                    )}\n                >\n                    <textarea\n                        className={classNames(\n                            classes.threadTextarea,\n                            classes.fullHeight\n                        )}\n                        onChange={props.handleTweetInput}\n                        onSelect={props.handleCursorPositionChange}\n                        placeholder=\"Type your tweet here...\"\n                        value={props.tweetText}\n                        ref={ref}\n                    />\n\n                    <InputToolbar\n                        pickEmojiHandler={props.pickEmojiHandler}\n                        splitTweetHandler={props.splitTweetHandler}\n                        clearTweetHandler={props.clearTweetHandler}\n                    />\n                </Container>\n            </Grid>\n\n            {/* GRID ITEM 02: Status Bar */}\n            <Grid item xs={12} className={classes.fixedSizeFlexItem}>\n                <Container\n                    className={classNames(\n                        classes.statsContainer,\n                        classes.containerWithShadow\n                    )}\n                >\n                    <Typography\n                        variant=\"body2\"\n                        className={classes.statsText}\n                    >{`Characters: ${props.tweetText.length}`}</Typography>\n                    <Typography\n                        variant=\"body2\"\n                        className={classes.statsText}\n                    >{`Tweets: ${props.thread.length}`}</Typography>\n                </Container>\n            </Grid>\n\n            {/* GRID ITEM 03: View Thread Button\n            This button is hidden in the desktop view of the app */}\n            <Hidden mdUp>\n                <Grid item xs={12} className={classes.fixedSizeFlexItem}>\n                    <StyledButton\n                        variant=\"contained\"\n                        color=\"secondary\"\n                        fullWidth\n                        onClick={props.viewThreadHandler}\n                    >\n                        View thread\n                    </StyledButton>\n                </Grid>\n            </Hidden>\n        </Grid>\n    );\n});\n\nexport default TweetInput;\n","import dotenv from \"dotenv\";\n\ndotenv.config();\n\nexport const TWEET_LENGTH = 280;\nexport const SERVER =\n    process.env.NODE_ENV === \"development\" ? \"http://localhost:8080\" : \"\";\nexport const UNTITLED_NAME = \"Untitled User\";\nexport const UNTITLED_SCREEN_NAME = \"untitled_user\";\nexport const UNTITLED_PROFILE_IMAGE = \"\";\nexport const MAX_IMAGE_SIZE = 5 * 1000 * 1000; // Size in bytes\nexport const MAX_GIF_SIZE = 15 * 1000 * 1000; // Size in bytes\nexport const THREADDER_DB_NAME = \"threadderDB\";\nexport const THREADDER_DB_VERSION = 1;\n","import { makeStyles } from \"@material-ui/core/styles\";\nimport classNames from \"classnames\";\nimport Grid from \"@material-ui/core/Grid\";\nimport CustomIconButton from \"./CustomIconButton\";\nimport ImageIcon from \"@material-ui/icons/Image\";\nimport {\n    TWEET_LENGTH,\n    MAX_IMAGE_SIZE,\n    MAX_GIF_SIZE,\n} from \"../utils/generalConstants\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: \"100%\",\n        marginTop: \"0.4em\",\n        display: \"flex\",\n        flexFlow: \"row nowrap\",\n        gap: 0,\n        justifyContent: \"space-between\",\n        alignItems: \"center\",\n    },\n    imageButton: {\n        margin: 0,\n        padding: 0,\n        position: \"relative\",\n        left: \"-0.1875rem\", // Calculated by dividing 3px by 16px which is equivalent to 1rem\n    },\n    resetFont: {\n        /**\n         * A helper class to make sure that an element uses the parent's\n         * font family and font size\n         */\n        fontFamily: \"inherit\",\n        fontSize: \"inherit\",\n    },\n    tweetLength: {\n        margin: 0,\n        width: \"100%\",\n        textAlign: \"right\",\n        color: theme.palette.secondary.main,\n    },\n}));\n\nexport default function TweetToolbar(props) {\n    const classes = useStyles();\n\n    const supportedImageTypes = [\".png\", \".jpg\", \".jpeg\", \".gif\", \".webp\"];\n\n    const triggerFileSelect = (event) => {\n        /**\n         * Triggers a click event on the file selection input\n         * element which is hidden.\n         */\n\n        // We need to go 2 levels up to get the common parent\n        const parent = event.target.parentElement.parentElement;\n\n        const input = parent.querySelector(\"input[type='file']\");\n\n        input.click();\n    };\n\n    const filesSelectedHandler = (event) => {\n        /**\n         * Event handler for the file input. It runs everytime\n         * the user selects files from the dialog that opens\n         * when the add image button is clicked.\n         */\n\n        const files = event.target.files;\n\n        if (files.length === 0) {\n            return;\n        }\n\n        // Create an array from the files list to be able to use\n        // the array every() and map() methods\n        const filesArr = Array.from(files);\n\n        if (exceedsAllowedLimits(filesArr)) {\n            props.setAlertData(\n                \"error\",\n                \"A maximum of 1 GIF or 4 images can be added\"\n            );\n\n            return;\n        }\n\n        if (!allFilesAreSupported(filesArr)) {\n            props.setAlertData(\n                \"error\",\n                `Only the following file types are supported: ${supportedImageTypes.join(\n                    \", \"\n                )}`\n            );\n\n            return;\n        }\n\n        if (!filesArr.every((file) => fileSizeAllowed(file))) {\n            props.setAlertData(\n                \"error\",\n                \"You can only upload images that are smaller than 5 MB or GIFs smaller than 15 MB\"\n            );\n\n            return;\n        }\n\n        // If all the files pass the checks, send them back\n        // to the parent Tweet component to be saved in its\n        // state\n        props.addImagesHandler(filesArr);\n\n        // We need to clear the value, because if a Chrome user\n        // attempts to upload the same image twice, the 'change'\n        // event will not fire, because the value of the input\n        // element won't actually change\n        event.target.value = \"\";\n    };\n\n    const exceedsAllowedLimits = (files) => {\n        /**\n         * Tests all the files in the array to test if it exceeds\n         * the maximum number of images allowed by Twitter (currently,\n         * 1 GIF or 4 images).\n         *\n         * Returns true if the limits are exceeded, false otherwise.\n         */\n\n        return (\n            files.length > 4 ||\n            (files.some((file) => file.type === \"image/gif\") &&\n                files.length > 1)\n        );\n    };\n\n    const allFilesAreSupported = (files) => {\n        /**\n         * Tests all files in an array to make sure that they all\n         * are supported image types.\n         */\n\n        // Clean the file extensions from the dot at the beginning\n        // and prefix the extension with the string 'image/' because\n        // that is how the image type appears in the file URL as\n        // formatted by the FileReader\n        const extensions = supportedImageTypes.map(\n            (type) => `image/${type.slice(1)}`\n        );\n\n        return files.every((file) => {\n            return extensions.some((ext) => file.type === ext);\n        });\n    };\n\n    const fileSizeAllowed = (file) => {\n        /**\n         * Checks the size of the files selected by the user to\n         * make sure they meet the limits defined by the Twitter\n         * API.\n         */\n\n        return (\n            file.size < MAX_IMAGE_SIZE ||\n            (file.type === \"image/gif\" && file.size < MAX_GIF_SIZE)\n        );\n    };\n\n    return (\n        <Grid className={classes.root}>\n            <Grid item>\n                <CustomIconButton\n                    className={classes.imageButton}\n                    size=\"small\"\n                    title=\"Add image\"\n                    disabled={props.addDisabled}\n                    onClick={triggerFileSelect}\n                >\n                    <ImageIcon />\n                    <input\n                        type=\"file\"\n                        accept={supportedImageTypes.join(\",\")}\n                        multiple\n                        hidden\n                        onChange={filesSelectedHandler}\n                    />\n                </CustomIconButton>\n            </Grid>\n            <Grid item>\n                <p\n                    className={classNames(\n                        classes.resetFont,\n                        classes.tweetLength\n                    )}\n                >\n                    {`${props.length}/${TWEET_LENGTH}`}\n                </p>\n            </Grid>\n        </Grid>\n    );\n}\n","import {\n    THREADDER_DB_NAME,\n    THREADDER_DB_VERSION,\n} from \"../utils/generalConstants\";\n\n// REVIEW: Try to simplify the database code and improve it.\n\nlet db;\nlet dbOpen = false;\n\nexport function dbConnected() {\n    /**\n     * Returns a boolean to indicate whether\n     * the database was connected successfully\n     * or not.\n     */\n\n    return dbOpen;\n}\n\nexport function openDB() {\n    /**\n     * Initiates the process of opening the application database\n     * and returns a promise that resolves once the database is\n     * connected and rejects when any errors occur.\n     */\n\n    return new Promise((resolve, reject) => {\n        if (!window.indexedDB) {\n            reject(\n                \"Your browser doesn't support IndexedDB. Some features may not work properly.\"\n            );\n        }\n\n        const openRequest = window.indexedDB.open(\n            THREADDER_DB_NAME,\n            THREADDER_DB_VERSION\n        );\n\n        // EVENT HANDLERS\n        openRequest.addEventListener(\"error\", (event) => {\n            const error = event.target.error;\n\n            reject(`${error.name}: ${error.message}`);\n        });\n\n        openRequest.addEventListener(\"blocked\", () => {\n            reject(\n                \"Upgrading the database failed. Please close all other tabs with this site open.\"\n            );\n        });\n\n        openRequest.addEventListener(\"upgradeneeded\", (event) => {\n            // On initial creation of the database, create the\n            // stores required for the current version\n            createStores(event.target.result);\n        });\n\n        openRequest.addEventListener(\"success\", (event) => {\n            db = event.target.result;\n            dbOpen = true;\n\n            db.addEventListener(\"close\", () => {\n                // Event handler that resets the dbOpen to\n                // false when the database is closed\n                dbOpen = false;\n            });\n\n            resolve(\"Connected\");\n        });\n    });\n}\n\nexport function clearImagesFromDB() {\n    /**\n     * Clears all entries in the images store. If successful, it\n     * returns nothing. Otherwise, it returns an error message\n     * to indicate that the process failed.\n     */\n\n    if (db && db instanceof IDBDatabase) {\n        const transaction = db.transaction([\"images\"], \"readwrite\");\n\n        const store = transaction.objectStore(\"images\");\n\n        const clearRequest = store.clear();\n\n        // EVENT HANDLERS\n        transaction.addEventListener(\"error\", () => {\n            return \"Clear images transaction failed\";\n        });\n\n        clearRequest.addEventListener(\"error\", () => {\n            return \"Clear images request failed\";\n        });\n    }\n}\n\nfunction addOrUpdateImages(tweetIndex, imgArr, storeOperation) {\n    /**\n     * Utility function that adds a new entry to the database or\n     * updates an existing one with an array of file objects passed\n     * to it.\n     *\n     * It also takes a string that represents a store operation,\n     * either 'add' or 'put'. This string will be passed as a key\n     * to get the equivalent function from the objectStore prototype.\n     */\n\n    return new Promise((resolve, reject) => {\n        if (db && db instanceof IDBDatabase) {\n            // We first convert each file object to an array buffer\n            // and store the buffer in an object that also contains\n            // the file name and the file type.\n            // The reason we convert the file objects to array\n            // buffers is that, according to this article on Google\n            // developers website\n            // (https://developers.google.com/web/fundamentals/instant-and-offline/web-storage/indexeddb-best-practices#not_everything_can_be_stored_in_indexeddb_on_all_platforms)\n            // storing File objects in an indexedDB doesn't work well\n            // on all platforms.\n            fileObjectsToBuffers(imgArr)\n                .then((buffers) => {\n                    const transaction = db.transaction([\"images\"], \"readwrite\");\n\n                    const store = transaction.objectStore(\"images\");\n\n                    const tweetImages = { tweetIndex, buffers };\n\n                    const request = store[storeOperation](tweetImages);\n\n                    // EVENT HANDLERS\n                    const errorHandler = () => {\n                        reject(\"Failed to save images to database\");\n                    };\n\n                    transaction.addEventListener(\"abort\", () => {\n                        reject(\"Adding images to the database was aborted\");\n                    });\n\n                    transaction.addEventListener(\"error\", errorHandler);\n\n                    request.addEventListener(\"success\", () => {\n                        resolve(\"All done!\");\n                    });\n\n                    request.addEventListener(\"error\", errorHandler);\n                })\n                .catch(() => {\n                    reject(\n                        \"Images are not formatted properly for the database\"\n                    );\n                });\n        } else {\n            reject(\"Can't save any images because the database isn't open\");\n        }\n    });\n}\n\nexport function saveImagesToDB(tweetIndex, imgArr) {\n    /**\n     * Saves the images passed in the imgArr to the appropriate\n     * store in the database.\n     */\n\n    return addOrUpdateImages(tweetIndex, imgArr, \"add\");\n}\n\nexport function modifyImagesInDB(tweetIndex, imgArr) {\n    /**\n     * Updates an existing entry in the database with the new\n     * imgArr.\n     */\n\n    return addOrUpdateImages(tweetIndex, imgArr, \"put\");\n}\n\nfunction getOrDeleteImagesFromDB(tweetIndex, storeOperation) {\n    /**\n     * Utility function that get or deletes an ew entry from the database.\n     *\n     * It takes a string that represents a store operation, either 'get'\n     * or 'delete'. This string will be passed as a key to get the\n     * equivalent function from the objectStore prototype.\n     */\n\n    return new Promise((resolve, reject) => {\n        if (db && db instanceof IDBDatabase) {\n            const transaction = db.transaction([\"images\"], \"readwrite\");\n\n            const store = transaction.objectStore(\"images\");\n\n            const request = store[storeOperation](tweetIndex);\n\n            // EVENT HANDLERS\n            const errorHandler = () => {\n                reject(\"Failed to complete the required database operation\");\n            };\n\n            transaction.addEventListener(\"abort\", () => {\n                reject(\"Database operation was aborted\");\n            });\n\n            transaction.addEventListener(\"error\", errorHandler);\n\n            request.addEventListener(\"success\", (event) => {\n                resolve(event.target.result);\n            });\n\n            request.addEventListener(\"error\", errorHandler);\n        } else {\n            reject(\n                \"Can't complete the database operation because the database isn't open\"\n            );\n        }\n    });\n}\n\nexport function deleteImagesFromDB(tweetIndex) {\n    /**\n     * Deletes all images associated with a specific tweet from\n     * the database.\n     */\n\n    return getOrDeleteImagesFromDB(tweetIndex, \"delete\");\n}\n\nexport function reloadImagesFromDB(tweetIndex) {\n    /**\n     * Used when the page reloads to restore any images that\n     * the user has added to any tweet before the reload.\n     *\n     * It returns a promise that doesn't reject. If there\n     * were images stored in the database associated with\n     * the current tweet, then it loads those images.\n     *\n     * Otherwise, it returns an empty array to indicate that\n     * there was no images associated with this tweet.\n     */\n\n    return new Promise((resolve) => {\n        getOrDeleteImagesFromDB(tweetIndex, \"get\")\n            .then((results) => {\n                if (results) {\n                    // Convert the buffers back to file objects\n                    // so they can be loaded in the UI\n                    resolve(buffersToFileObjects(results.buffers));\n                } else {\n                    resolve([]);\n                }\n            })\n            .catch(() => {\n                resolve([]);\n            });\n    });\n}\n\nexport function indexExistsInDB(tweetIndex) {\n    /**\n     * Checks a tweetIndex to see if it has an existing item\n     * in the database.\n     *\n     * Returns a promise that doesn't reject. It resolves to\n     * true if an item exists, and false otherwise.\n     */\n\n    return new Promise((resolve) => {\n        getOrDeleteImagesFromDB(tweetIndex, \"get\")\n            .then((results) => {\n                if (results) {\n                    resolve(true);\n                } else {\n                    resolve(false);\n                }\n            })\n            .catch(() => {\n                resolve(false);\n            });\n    });\n}\n\nexport function getAllImagesFromDB() {\n    return new Promise((resolve, reject) => {\n        if (db && db instanceof IDBDatabase) {\n            const transaction = db.transaction([\"images\"], \"readonly\");\n\n            const store = transaction.objectStore(\"images\");\n\n            const request = store.getAll();\n\n            // EVENT HANDLERS\n            const errorHandler = () => {\n                reject(\"Failed to retrieve images from the database\");\n            };\n\n            transaction.addEventListener(\"error\", errorHandler);\n\n            transaction.addEventListener(\"abort\", () => {\n                reject(\"Retrieving the images from the database was aborted\");\n            });\n\n            request.addEventListener(\"error\", errorHandler);\n\n            request.addEventListener(\"success\", (event) => {\n                let out = [];\n\n                for (let tweet of event.target.result) {\n                    tweet.files = buffersToFileObjects(tweet.buffers);\n\n                    delete tweet.buffers;\n\n                    out.push(tweet);\n                }\n\n                resolve(out);\n            });\n        } else {\n            reject(\"Database is not connected\");\n        }\n    });\n}\n\nfunction createIndices(objectStore, indices) {\n    /**\n     * Utility function that takes an IndexedDB objectStore\n     * and an array of objects defining indices and creates\n     * those indices in the store.\n     */\n\n    indices.forEach((index) => {\n        objectStore.createIndex(index?.name, index?.keyPath, index?.params);\n    });\n}\n\nfunction createStores(db) {\n    /**\n     * Define the stores for the current version of the\n     * application database.\n     *\n     * This function is called when the 'upgradeneeded'\n     * event is fired when opening the database with\n     * a new version.\n     */\n\n    const imagesStore = db.createObjectStore(\"images\", {\n        keyPath: \"tweetIndex\",\n    });\n\n    createIndices(imagesStore, [\n        {\n            name: \"tweetIndex\",\n            keyPath: \"tweetIndex\",\n            params: { unique: true },\n        },\n    ]);\n}\n\nfunction fileObjectsToBuffers(filesArr) {\n    /**\n     * Takes an array of File objects and converts the\n     * files into ArrayBuffers. It then saves each buffer\n     * in an object that also contains the file name\n     * along with the file type.\n     *\n     * Returns a promise that resolves when all the File\n     * objects are converted successfully into ArrayBuffer\n     * objects.\n     */\n\n    const promises = filesArr.map(async (file) => {\n        const buf = await file.arrayBuffer();\n\n        if (buf instanceof ArrayBuffer) {\n            return {\n                name: file.name,\n                type: file.type,\n                buffer: buf,\n            };\n        }\n    });\n\n    return Promise.all(promises);\n}\n\nfunction buffersToFileObjects(buffersArr) {\n    /**\n     * Takes an array of objects that each contain an\n     * ArrayBuffer, a file name and a file type and\n     * constructs File objects out of this array.\n     *\n     * Returns the File objects in an array.\n     */\n\n    return buffersArr.map(\n        (bufObj) =>\n            new File([bufObj.buffer], bufObj.name, { type: bufObj.type })\n    );\n}\n","import { makeStyles } from \"@material-ui/core/styles\";\nimport CancelIcon from \"@material-ui/icons/Cancel\";\nimport CustomIconButton from \"./CustomIconButton\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        position: \"relative\",\n        width: \"100%\",\n        minHeight: \"100%\",\n        maxHeight: \"100%\",\n    },\n    deleteButton: {\n        padding: 0,\n        margin: 0,\n        position: \"absolute\",\n        right: \"6px\",\n        top: \"6px\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n    },\n    iconBackground: {\n        position: \"absolute\",\n        minWidth: \"65%\",\n        maxWidth: \"65%\",\n        minHeight: \"65%\",\n        maxHeight: \"65%\",\n        backgroundColor: \"black\",\n        borderRadius: \"1em\",\n    },\n    buttonIcon: {\n        zIndex: 900,\n        scale: 1.2,\n    },\n    image: {\n        width: \"100%\",\n        height: \"100%\",\n        objectFit: \"cover\",\n    },\n}));\n\nexport default function TweetImage(props) {\n    const classes = useStyles();\n\n    const revokeImgURL = () => {\n        /**\n         * Once the image is loaded, revokes the URL object\n         * that was used in its 'src' attribute.\n         */\n\n        URL.revokeObjectURL(props.imageSource);\n    };\n\n    return (\n        <div\n            className={classes.root}\n            style={{ gridColumn: props.gridColumn, gridRow: props.gridRow }}\n        >\n            <CustomIconButton\n                size=\"small\"\n                className={classes.deleteButton}\n                onClick={() => props.deleteImageHandler(props.imageIndex)}\n            >\n                <span className={classes.iconBackground} />\n                <CancelIcon className={classes.buttonIcon} />\n            </CustomIconButton>\n\n            <img\n                src={props.imageSource}\n                alt={props.altText}\n                className={classes.image}\n                onLoad={revokeImgURL}\n            />\n        </div>\n    );\n}\n","export function isOdd(num) {\n    return num % 2 !== 0;\n}\n\nexport function isEven(num) {\n    return num % 2 === 0;\n}\n","import { useState, useEffect, createRef } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport classNames from \"classnames\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Hidden from \"@material-ui/core/Hidden\";\nimport TweetToolbar from \"./TweetToolbar\";\nimport TweetImage from \"./TweetImage\";\nimport { getColumn, getRow } from \"../controllers/gridPlacement\";\nimport {\n    dbConnected,\n    indexExistsInDB,\n    saveImagesToDB,\n    modifyImagesInDB,\n    deleteImagesFromDB,\n    reloadImagesFromDB,\n} from \"../controllers/db\";\n\n/**\n * The style and implementation of the Tweet component which is used\n * by the ThreadViewer to display the split tweets in a format that\n * is familiar to a Twitter user.\n * It shows a picture of the logged in user, the user's name and\n * their Twitter handle, as well as the text for each of the tweets.\n */\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        /*\n         * Styles that apply to the main container of the Tweet component.\n         * It adds a margin to the bottom of the component if there are\n         * multiple tweets displayed. If the tweet is the last one, or the\n         * only one, in the thread, then no margin is added.\n         */\n        marginBottom: \"1em\",\n        flexFlow: \"row nowrap\",\n        \"&:last-child\": {\n            marginBottom: 0,\n        },\n    },\n    expandingFlexItem: {\n        flex: 1,\n    },\n    fixedSizeFlexItem: {\n        flex: 0,\n    },\n    verticalGrid: {\n        display: \"flex\",\n        flexFlow: \"column nowrap\",\n    },\n    centerVerticalGridItems: {\n        alignItems: \"center\",\n    },\n    threadLineContainer: {\n        padding: 0,\n    },\n    threadLine: {\n        /**\n         * A class that controls the appearance of the line that\n         * visually connects each tweet to the following one in\n         * the thread.\n         * This lines serves no functional purpose. It is just\n         * a visual cue, that is already used by Twitter, to\n         * indicate that these tweets belong together in the same\n         * thread.\n         */\n        width: \"2px\",\n\n        // Add the marginBottom value from the root to the height\n        height: \"calc(100% + 1.5em)\",\n\n        backgroundColor: theme.palette.background.default,\n    },\n    tweetContainer: {\n        marginLeft: \"1em\",\n    },\n    resetFont: {\n        /**\n         * A helper class to make sure that an element uses the parent's\n         * font family and font size\n         */\n        fontFamily: \"inherit\",\n        fontSize: \"inherit\",\n    },\n    defaultTextColor: {\n        color: theme.palette.primary.contrastText,\n    },\n    userName: {\n        fontWeight: \"bold\",\n    },\n    userHandle: {\n        color: theme.palette.primary.contrastText2,\n        marginLeft: \"0.5em\",\n    },\n    tweetText: {\n        padding: 0,\n        margin: 0,\n        marginTop: \"0.25em\",\n\n        /**\n         * This ensures that any line breaks or extra white spaces added\n         * by the user in the TweetInput component is not discarded when\n         * displayed in the Tweet component.\n         */\n        whiteSpace: \"pre-wrap\",\n\n        overflowWrap: \"break-word\",\n    },\n    imageGallery: {\n        width: \"100%\",\n        height: \"16em\",\n        minHeight: \"16em\",\n        maxHeight: \"16em\",\n        marginTop: \"0.4em\",\n        borderRadius: \"0.5em\",\n        display: \"grid\",\n        gridTemplateColumns: \"1fr 1fr\",\n        gridTemplateRows: \"1fr 1fr\",\n        gridGap: \"0.25em\",\n    },\n    hiddenOverflow: {\n        overflow: \"hidden\",\n    },\n}));\n\nexport default function Tweet(props) {\n    const classes = useStyles();\n\n    // Destruct the props objects to get some of the\n    // items that will be used as dependencies for\n    // some of the hooks.\n    const { tweetIndex, setAlertData } = props;\n\n    const [images, setImages] = useState([]);\n    const [reloadImages, setReloadImages] = useState(true);\n    const [disableAddImages, setDisableAddImages] = useState(false);\n    const [tweetLength, setTweetLength] = useState(0);\n\n    const tweetTextRef = createRef(null);\n\n    const addImages = (imagesToAdd) => {\n        /**\n         * Updates the component state to add new\n         * images to the tweet.\n         */\n\n        const updatedImages = [...images, ...imagesToAdd];\n\n        setImages(updatedImages);\n    };\n\n    const removeImage = (index) => {\n        /**\n         * Updates the component state to delete\n         * an image from the tweet.\n         */\n\n        const updatedImages = [\n            ...images.slice(0, index),\n            ...images.slice(index + 1),\n        ];\n\n        setImages(updatedImages);\n    };\n\n    const imageElements = images.map((image, index, arr) => {\n        const [colStart, colEnd] = getColumn(index, arr.length);\n        const [rowStart, rowEnd] = getRow(index, arr.length);\n\n        const key = image + index + colStart + colEnd + rowStart + rowEnd;\n\n        const src = URL.createObjectURL(image);\n\n        return (\n            <TweetImage\n                key={key}\n                imageSource={src}\n                altText=\"\"\n                // Specify the column and row placement of each image\n                // in the grid, so that images fill the entire grid\n                // even if not all of the maximum of 4 images are added\n                gridColumn={`${colStart} / ${colEnd}`}\n                gridRow={`${rowStart} / ${rowEnd}`}\n                imageIndex={index}\n                deleteImageHandler={removeImage}\n            />\n        );\n    });\n\n    useEffect(() => {\n        // Get the tweet length from the DOM element reference\n        // and update the state\n        setTweetLength(tweetTextRef.current.innerText.length);\n    }, [tweetTextRef]);\n\n    useEffect(() => {\n        // When the app reloads, check the database for any\n        // images that were added to the tweets before\n        // reloading, and add them again.\n        // It runs in an interval until the connection to\n        // the database is successful and then it reloads\n        // the images from the database.\n\n        let checkInterval;\n        let checkTimeout;\n\n        const reload = () => {\n            if (dbConnected()) {\n                clearInterval(checkInterval);\n\n                reloadImagesFromDB(tweetIndex).then((results) => {\n                    setImages(results);\n                });\n\n                setReloadImages(false);\n            }\n        };\n\n        if (reloadImages) {\n            checkInterval = setInterval(reload, 20);\n\n            // Setup a 10 second timeout. If the database\n            // is still not connected after that, then\n            // there is probably some problem with it and\n            // it won't connect. This way, we won't keep\n            // checking for it and wasting resources\n            // unnecessarily.\n            if (!checkTimeout) {\n                checkTimeout = setTimeout(() => {\n                    clearInterval(checkInterval);\n                }, 10000);\n            }\n        }\n    }, [reloadImages, tweetIndex]);\n\n    useEffect(() => {\n        // Disable the add images button once the limits defined by\n        // Twitter are reached\n        const shouldDisable =\n            images.length === 4 ||\n            (images.length === 1 && images[0].type === \"image/gif\");\n\n        setDisableAddImages(shouldDisable);\n    }, [images]);\n\n    useEffect(() => {\n        // Calls an asynchronous function each time the images\n        // state is updated to save the state in the database.\n        (async () => {\n            if (dbConnected()) {\n                // Checks if there is an entry for the tweet\n                // already in the database. Resolves to either\n                // true or false\n                const checkIndex = await indexExistsInDB(tweetIndex);\n\n                if (checkIndex) {\n                    if (images.length > 0) {\n                        modifyImagesInDB(tweetIndex, images).catch((err) => {\n                            setAlertData(\"error\", err);\n                        });\n                    } else {\n                        deleteImagesFromDB(tweetIndex).catch((err) => {\n                            setAlertData(\"error\", err);\n                        });\n                    }\n                } else {\n                    if (images.length > 0) {\n                        saveImagesToDB(tweetIndex, images).catch((err) => {\n                            setAlertData(\"error\", err);\n                        });\n                    }\n                }\n            }\n        })();\n    }, [tweetIndex, setAlertData, images]);\n\n    return (\n        <Grid container className={classes.root}>\n            <Grid\n                container\n                className={classNames(\n                    classes.fixedSizeFlexItem,\n                    classes.verticalGrid,\n                    classes.centerVerticalGridItems\n                )}\n            >\n                <Grid item>\n                    <Avatar\n                        src={props.user.profileImage}\n                        alt={`${props.user.name} profile picture`}\n                    />\n                </Grid>\n\n                {/* Render a line that connects all tweets similar to\n                 * what happens on Twitter when you write a thread.\n                 * This only render if the tweet is not the last one\n                 * which is determined based on the boolean prop\n                 * 'threadLine'.\n                 */}\n                {props.threadLine && (\n                    <Grid\n                        item\n                        className={classNames(\n                            classes.expandingFlexItem,\n                            classes.threadLineContainer\n                        )}\n                    >\n                        <div className={classes.threadLine} />\n                    </Grid>\n                )}\n            </Grid>\n\n            {/* Vertical grid that contains the user information\n             * as well as the text of the tweet.\n             */}\n            <Grid\n                container\n                className={classNames(\n                    classes.expandingFlexItem,\n                    classes.verticalGrid,\n                    classes.tweetContainer,\n                    classes.hiddenOverflow\n                )}\n            >\n                {/* Grid item that includes the user information\n                 * split over two spans, one for the name and\n                 * another for the Twitter handle.\n                 */}\n                <Grid item>\n                    <span\n                        className={classNames(\n                            classes.resetFont,\n                            classes.defaultTextColor,\n                            classes.userName\n                        )}\n                    >\n                        {props.user.name}\n                    </span>\n                    <span\n                        className={classNames(\n                            classes.resetFont,\n                            classes.userHandle\n                        )}\n                    >\n                        {`@${props.user.screenName}`}\n                    </span>\n                </Grid>\n\n                {/* Grid item that includes the tweet text */}\n                <Grid item>\n                    <p\n                        className={classNames(\n                            classes.resetFont,\n                            classes.defaultTextColor,\n                            classes.tweetText\n                        )}\n                        ref={tweetTextRef}\n                    >\n                        {props.children}\n                    </p>\n                </Grid>\n\n                <Hidden xsUp={images.length === 0}>\n                    <Grid\n                        item\n                        className={classNames(\n                            classes.imageGallery,\n                            classes.hiddenOverflow\n                        )}\n                    >\n                        {imageElements}\n                    </Grid>\n                </Hidden>\n\n                <Grid item>\n                    <TweetToolbar\n                        length={tweetLength}\n                        addDisabled={disableAddImages}\n                        setAlertData={props.setAlertData}\n                        addImagesHandler={addImages}\n                    />\n                </Grid>\n            </Grid>\n        </Grid>\n    );\n}\n","import { isOdd, isEven } from \"../utils/numUtils\";\n\n/**\n * Exports a couple of functions that are used in the tweet\n * component to control the placement of any images added to\n * the tweet.\n *\n * The images are added to a gallery that is made of a CSS\n * grid and can take a maximum of 4 images, since this is\n * the maximum number of images that can be added to a tweet.\n */\n\nexport function getColumn(itemIndex, totalItems) {\n    /**\n     * Calculates the start and end grid columns for an item\n     * based on its index and the number of items in the grid.\n     *\n     * The values are mostly hard coded since a tweet can only\n     * have a maximum of 4 images so there isn't a lot of\n     * variation in how they could be placed.\n     */\n\n    let colStart, colEnd;\n\n    if (isEven(itemIndex)) {\n        colStart = 1;\n    } else {\n        colStart = 2;\n    }\n\n    if (\n        (isEven(itemIndex) && totalItems === itemIndex + 1) ||\n        isOdd(itemIndex)\n    ) {\n        colEnd = 3;\n    } else {\n        colEnd = 2;\n    }\n\n    return [colStart, colEnd];\n}\n\nexport function getRow(itemIndex, totalItems) {\n    /**\n     * Calculates the start and end grid rows for an item\n     * based on its index and the number of items in the grid.\n     *\n     * The values are mostly hard coded since a tweet can only\n     * have a maximum of 4 images so there isn't a lot of\n     * variation in how they could be placed.\n     */\n\n    let rowStart, rowEnd;\n\n    if (itemIndex < 2) {\n        rowStart = 1;\n    } else {\n        rowStart = 2;\n    }\n\n    if ((itemIndex < 2 && totalItems < 3) || itemIndex >= 2) {\n        rowEnd = 3;\n    } else {\n        rowEnd = 2;\n    }\n\n    return [rowStart, rowEnd];\n}\n","import { makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        color: theme.palette.secondary.main,\n    },\n}));\n\nexport default function HashtagAndMention(props) {\n    const classes = useStyles();\n\n    return <strong className={classes.root}>{props.text}</strong>;\n}\n","import { makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        \"&:link\": {\n            color: theme.palette.secondary.main,\n        },\n        \"&:visited\": {\n            color: theme.palette.secondary.dark,\n        },\n        \"&:hover\": {\n            color: theme.palette.secondary.hover,\n        },\n        \"&:active\": {\n            color: theme.palette.secondary.light,\n        },\n    },\n}));\n\nexport default function CustomURL(props) {\n    const classes = useStyles();\n\n    return (\n        <a\n            href={props.url}\n            target=\"_blank\"\n            rel=\"noreferrer\"\n            className={classes.root}\n        >\n            {props.url}\n        </a>\n    );\n}\n","const hashtagAndMentionRegex = /(@\\w+|#\\w*[a-zA-Z]+\\w*)/g;\nconst urlRegex =\n    /(https?:\\/\\/(?:www\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b(?:[-a-zA-Z0-9()@:%_+.~#?&//=]*))/g;\n\nfunction splitTweetEntities(tweet) {\n    /**\n     * Takes a string of text and splits any items that match\n     * the global defined regex patterns and returns an array\n     * that contains the text broken into different elements\n     * that include the parts of the string that matched the\n     * patterns.\n     */\n\n    return tweet\n        .split(hashtagAndMentionRegex)\n        .map((item) => {\n            if (!item) {\n                return \"\";\n            }\n\n            return item.split(urlRegex);\n        })\n        .flat()\n        .filter((item) => item && item !== \"\");\n}\n\nexport function highlightTweetEntities(tweet, HashtagAndMention, URL) {\n    /**\n     * Converts all of the tweet entities into their respective\n     * React components.\n     */\n\n    let output = [];\n\n    if (typeof tweet === \"string\") {\n        output = splitTweetEntities(tweet).map((item, index) => {\n            if (hashtagAndMentionRegex.test(item)) {\n                return (\n                    <HashtagAndMention key={`${item}-${index}`} text={item} />\n                );\n            }\n\n            if (urlRegex.test(item)) {\n                return <URL key={`${item}-${index}`} url={item} />;\n            }\n\n            return item;\n        });\n    }\n\n    return output;\n}\n","import { useEffect, useRef } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport classNames from \"classnames\";\nimport Container from \"@material-ui/core/Container\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Hidden from \"@material-ui/core/Hidden\";\nimport DOMPurify from \"dompurify\";\nimport StyledButton from \"./StyledButton\";\nimport Tweet from \"./Tweet\";\nimport HashtagAndMention from \"./HashtagAndMention\";\nimport CustomURL from \"./CustomURL\";\nimport { highlightTweetEntities } from \"../controllers/tweetEntitiesHandler\";\n\n/**\n * The styles and implementation of the Thread Viewer component.\n * This component will show the tweets passed from the App\n * component using the Tweet component.\n * It also has the Publish Thread button which activates when\n * there are at least 1 tweet added.\n */\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        flexFlow: \"column nowrap\",\n    },\n    fullHeight: {\n        height: \"100%\",\n    },\n    containerWithShadow: {\n        boxShadow: theme.shadows[4],\n    },\n    expandingFlexItem: {\n        flex: 1,\n    },\n    fixedSizeFlexItem: {\n        flex: 0,\n    },\n    autoOverflow: {\n        overflow: \"auto\",\n    },\n    hiddenOverflow: {\n        overflow: \"hidden\",\n    },\n    tweetsContainer: {\n        padding: \"1.5em\",\n        backgroundColor: theme.palette.primary.main,\n    },\n    buttonRowContainer: {\n        display: \"flex\",\n        flexFlow: \"row nowrap\",\n        justifyContent: \"space-between\",\n        gap: \"1em\",\n        margin: 0,\n        padding: 0,\n    },\n}));\n\nexport default function ThreadViewer(props) {\n    const classes = useStyles();\n\n    const tweets = props.thread.map((tweet, index, arr) => {\n        const sanitizedTweet = DOMPurify.sanitize(tweet);\n\n        const highlightedTweet = highlightTweetEntities(\n            sanitizedTweet,\n            HashtagAndMention,\n            CustomURL\n        );\n\n        return (\n            <Tweet\n                // The index is used as a key here on purpose because\n                // it is the only unique identifier available for the\n                // tweet, apart from its text.\n                // Since the data comes directly from user inputting\n                // the text, there is no way to get an ID for each\n                // tweet.\n                // The text of the tweet could have been used as a key\n                // but that would create issues if the user adds images\n                // to the tweet, because if the user decides to change\n                // the text, then the key would change and the images\n                // would be removed.\n                // Using the index as a key solves this issue, because\n                // the images are added to the tweet based on its\n                // location in the array. However, this creates another\n                // issue. If the user adds images to the tweet, then\n                // decides to add another tweet before it, then all the\n                // images would shift to the previous tweet.\n                // However, the user adding an entire tweet before is\n                // definitely less likely to happen than the user updating\n                // the text of the tweet, it makes more sense to rely on\n                // the array index, until a better solution to identify\n                // each tweet is figured out.\n                key={index}\n                tweetIndex={index}\n                user={props.user}\n                threadLine={index + 1 < arr.length}\n                setAlertData={props.setAlertData}\n            >\n                {highlightedTweet}\n            </Tweet>\n        );\n    });\n\n    const containerRef = useRef(null);\n\n    // Scroll the thread viewer to the tweet currently being edited\n    // by the user\n    useEffect(() => {\n        if (containerRef) {\n            const scrollMaxLength =\n                containerRef.current.scrollHeight -\n                containerRef.current.clientHeight;\n\n            containerRef.current.scrollTop =\n                Math.floor(props.scroll * scrollMaxLength) - 40;\n        }\n    });\n\n    return (\n        <Grid\n            container\n            spacing={2}\n            className={classNames(\n                classes.root,\n                classes.fullHeight,\n                classes.hiddenOverflow\n            )}\n        >\n            {/* GRID ITEM 01: Thread List */}\n            <Grid\n                item\n                xs={12}\n                className={classNames(\n                    classes.expandingFlexItem,\n                    classes.fullHeight,\n                    classes.hiddenOverflow\n                )}\n            >\n                <Container\n                    className={classNames(\n                        classes.tweetsContainer,\n                        classes.fullHeight,\n                        classes.containerWithShadow,\n                        classes.autoOverflow\n                    )}\n                    ref={containerRef}\n                >\n                    {tweets}\n                </Container>\n            </Grid>\n\n            {/* GRID ITEM 02: Button Bar\n            The Edit Thread button will be hidden in the desktop view of the app */}\n            <Grid item xs={12} className={classes.fixedSizeFlexItem}>\n                <Container\n                    className={classNames(\n                        classes.buttonRowContainer,\n                        classes.fullHeight\n                    )}\n                >\n                    <Hidden mdUp>\n                        <StyledButton\n                            variant=\"contained\"\n                            color=\"secondary\"\n                            fullWidth\n                            onClick={props.editThreadHandler}\n                        >\n                            Edit thread\n                        </StyledButton>\n                    </Hidden>\n\n                    <StyledButton\n                        variant=\"contained\"\n                        color=\"secondary\"\n                        onClick={props.publishHandler}\n                        disabled={!tweets.length > 0}\n                        fullWidth\n                    >\n                        Publish thread\n                    </StyledButton>\n                </Container>\n            </Grid>\n        </Grid>\n    );\n}\n","import { makeStyles } from \"@material-ui/core/styles\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\n\nconst useStyles = makeStyles((theme) => ({\n    dialogText: {\n        color: theme.palette.primary.contrastText,\n        textAlign: \"center\",\n    },\n}));\n\nexport default function MessagesDialog(props) {\n    const classes = useStyles();\n\n    return (\n        <Dialog open={props.open}>\n            <DialogContent>\n                <DialogContentText className={classes.dialogText}>\n                    {props.msg}\n                </DialogContentText>\n            </DialogContent>\n        </Dialog>\n    );\n}\n","import { makeStyles } from \"@material-ui/core/styles\";\nimport Collapse from \"@material-ui/core/Collapse\";\nimport Alert from \"@material-ui/lab/Alert\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        position: \"absolute\",\n        width: \"50%\",\n        margin: 0,\n        zIndex: 10000,\n        left: \"25%\",\n        top: 0,\n    },\n}));\n\nexport default function CustomAlert(props) {\n    /**\n     * Component that wraps Material UI's Alert component\n     * in a collapse component so that the Alert animates\n     * in and out when displayed.\n     */\n\n    const classes = useStyles();\n\n    return (\n        <Collapse in={props.visible} className={classes.root}>\n            <Alert severity={props.severity}>{props.msg}</Alert>\n        </Collapse>\n    );\n}\n","import { TWEET_LENGTH } from \"./generalConstants\";\n\nexport default function breakTextAtFullSentences(text) {\n    /**\n     * The main function of the module which will be used by\n     * the tweet splitter module.\n     *\n     * It starts by splitting the text at newline characters,\n     * then splits any tweets that are still longer than the\n     * maximum tweet length at fullstops.\n     */\n\n    const newLineSplit = combineSentencesIntoTweets(\n        splitAtNewlines(text),\n        \"\\n\"\n    );\n\n    // Return early if all tweets are shorter than the maximum\n    // character count allowed for tweets\n    if (newLineSplit.every((tweet) => tweet.length <= TWEET_LENGTH)) {\n        return newLineSplit;\n    }\n\n    // If there are tweets that are still longer than the maxmium\n    // allowed character count, attempt to split these tweets\n    // at fullstops, since a fullstop is usually an indication of\n    // a new sentence. However, make sure that sentences aren't\n    // split into extermely short tweets by recombining them\n    const fullSentenceSplit = combineSentencesIntoTweets(\n        newLineSplit\n            .map((tweet) => {\n                if (tweet.length <= TWEET_LENGTH) {\n                    return tweet;\n                }\n\n                return splitAtFullstops(tweet);\n            })\n            .flat()\n            .map((tweet) => tweet.trim())\n    );\n\n    return fullSentenceSplit;\n}\n\nfunction trimTopAndTailSpaces(text) {\n    /**\n     * Removes any spaces or tab characters from the start and end of\n     * a string. It is similar to the built-in trim() String method,\n     * but it doesn't remove newline characters like the trim() method\n     * does.\n     */\n\n    const startPattern = /^[ \\t]*/;\n    const endPattern = /[ \\t]*$/;\n\n    return text.replace(startPattern, \"\").replace(endPattern, \"\");\n}\n\nfunction splitAtNewlines(tweet) {\n    /**\n     * Takes a text and splits it into an array of tweets at the\n     * newline characters\n     */\n\n    return tweet.split(/(\\n)/).filter((tweet, idx, arr) => {\n        // This filters double newline characters keeping only\n        // one of them\n        return tweet !== \"\\n\" || (tweet === \"\\n\" && arr[idx] !== \"\\n\");\n    });\n}\n\nfunction splitAtFullstops(text) {\n    /**\n     * Takes a string that has multiple sentences ending in full stops\n     * and splits it into an array of single sentences that each contain\n     * the full stop at the end.\n     *\n     * It works by checking for any full stops that are followed by\n     * a letter or a newline character because that would mean they are\n     * at the middle of the string. It then splits the string at these\n     * full stops, which removes them from the sentences, then rejoins\n     * the whole string with a full stop followed by a space.\n     *\n     * Next, it splits the string again at any space character that is\n     * preceded by a full stop. The result of this is that each sentence\n     * would end up keeping its full stop.\n     */\n\n    /**\n     * Let's break this regex pattern down to clarify what it does exactly.\n     *\n     * The pattern matches against several alternatives to check if they\n     * exist in the text. It uses capturing groups for some of these\n     * alternatives to ensure that the text is only split if one of the\n     * alternatives captured is encountered.\n     *\n     * The first alternative is this:\n     * \\svs?\\.\n     * This matches a fullstop that comes after an abbreviation for the\n     * word versus, whether it is abbreviated as v. or vs.\n     * However, this fullstop isn't captured so it isn't used as a splitting\n     * point for the text.\n     *\n     * The second alternative is this:\n     * \\s\\w+[a-zA-Z]+(\\.)(?=\\s*[a-zA-Z]+\\w*)\n     * NOTE: The fullstop is captured in this alternative.\n     * This matches any fullstop that is preceeded and succeeded by strings\n     * that contain at least 1 alphabetic character.\n     * So, a string like this: \"testing strings. this should split\"\n     * will be split because the fullstop is preceeded and succeeded by\n     * strings that match this alternative.\n     * The same goes for: \"123m. GBP123\".\n     * However, a string similar to this won't be matched: \"123. 321\" since\n     * it doesn't fulfill the requirement of having at least 1 alphabetical\n     * character in the strings that preceed and succeed the fullstop.\n     *\n     * NOTE: The third alternative is this:\n     * \\d+[\\s./-]\\d+(\\.)(?=\\s*\\W*[a-zA-Z]+\\w*\\W*)\n     * The fullstop is captured in this alternative.\n     * This matches a fullstop that comes after a string of digits split by\n     * a space, a slash or a dash, and is succeeded by a strings of characters\n     * that contains at least 1 alphabetical character. This is to ensure that\n     * a fullstop that comes after an IP address, for instance, can be used\n     * to split the text, but the fullstops that actually separate the parts\n     * of the IP address are ignored.\n     *\n     * The fourth alternative is this:\n     * \\s\\d+(\\.)(?=\\s*\\W*[a-zA-Z]+\\w*\\W*)\n     * NOTE: The fullstop is captured in this alternative.\n     * This matches against any fullstop preceeded by a string of digits, that\n     * come after a whitespace, and succeeded by a string of characters that\n     * contains at least 1 alphabetical character.\n     * This is to ensure that a fullstop that comes after, for instance, a year\n     * in numerical format (e.g. I was born in 2000. I am now 21 years old) will\n     * be used as a splitting point if it is followed by a string that contains\n     * alphabetical characters.\n     *\n     * The last alternative is this:\n     * (\\.)$\n     * NOTE: The fullstop is captured in this alternative.\n     * This is the simplest alternative. It basically matches any fullstop that\n     * comes at the end of a string.\n     */\n\n    const removeFullstopPattern =\n        /\\svs?\\.|\\s\\w+[a-zA-Z]+(\\.)(?=\\s*[a-zA-Z]+\\w*)|\\d+[\\s./-]\\d+(\\.)(?=\\s*\\W*[a-zA-Z]+\\w*\\W*)|\\s\\d+(\\.)(?=\\s*\\W*[a-zA-Z]+\\w*\\W*)|(\\.)$/g;\n\n    let splitIndices = [];\n\n    for (const match of text.matchAll(removeFullstopPattern)) {\n        if (match[1] || match[2] || match[3] || match[4]) {\n            splitIndices.push(match.index + match[0].length);\n        }\n    }\n\n    if (splitIndices.length === 0) {\n        return [text];\n    }\n\n    return splitIndices\n        .map((splitIndex, index, arr) => {\n            if (index === 0) {\n                return text.slice(0, splitIndex);\n            }\n\n            if (index + 1 === arr.length) {\n                return text.slice(arr[index - 1]);\n            }\n\n            return text.slice(arr[index - 1], splitIndex);\n        })\n        .map((tweet) => trimTopAndTailSpaces(tweet));\n}\n\nfunction combineSentencesIntoTweets(sentenceArray, combiningCharacter = \" \") {\n    /**\n     * Takes an array of sentences and iterates over it combining\n     * the sentences into tweets that aren't longer than 280\n     * characters. However, if one of the sentences is shorter than\n     * 70 (1/4th of 280), it will add the following sentence to it\n     * even if the combined length is longer than 280. This is to\n     * avoid having very short tweets unnecessarily. If the user\n     * wants to have short tweets, they can force a split.\n     *\n     * Any tweets longer than 280 will be handled by further functions\n     * that will eventually split them to fit the maximum character\n     * count on Twitter.\n     *\n     * It uses a combiningCharacter parameter to allow the user to\n     * define if they want a non-space character added between the\n     * two sentences. If the combiningCharacter isn't specified, it\n     * will just use a space.\n     */\n\n    // Return early if sentenceArray is empty\n    if (sentenceArray.length === 0) {\n        return [];\n    }\n\n    let outArray = [];\n\n    for (let i = 0; i < sentenceArray.length; i++) {\n        // Just add the first sentence to the output array\n        if (i === 0) {\n            outArray.push(sentenceArray[i]);\n\n            continue;\n        }\n\n        // Get the last sentence that was added to the output array\n        const lastSentenceIndex = outArray.length - 1;\n        let lastSentence = outArray[lastSentenceIndex];\n\n        const curSentence = sentenceArray[i];\n\n        if (\n            lastSentence.length <= TWEET_LENGTH / 4 ||\n            lastSentence.length + curSentence.length <= TWEET_LENGTH\n        ) {\n            // If the current sentence starts with a newline character\n            // we just concatenate it to the last sentence. Otherwise,\n            // we add the combiningCharacter after the last sentence\n            // then concatenate the current one\n            lastSentence += curSentence.startsWith(\"\\n\")\n                ? curSentence\n                : `${combiningCharacter}${curSentence}`;\n\n            outArray[lastSentenceIndex] = lastSentence;\n        } else {\n            outArray.push(sentenceArray[i]);\n        }\n    }\n\n    return outArray;\n}\n\n// Module functions exported mainly for testing purposes\nexport const fsSplitter = {\n    trimTopAndTailSpaces,\n    splitAtFullstops,\n    combineSentencesIntoTweets,\n    splitAtNewlines,\n};\n","import { TWEET_LENGTH } from \"./generalConstants\";\n\nexport function breakLongSentence(sentence) {\n    /**\n     * Takes a tweet that is longer than the maximum character\n     * count allowed by Twitter and breaks it into an array of tweets that are\n     * all less than or equal to the maximum character count.\n     */\n\n    if (sentence.length <= TWEET_LENGTH) {\n        return sentence;\n    }\n\n    // Define a tweet length that is 3 characters shorter than the maximum\n    // length allowed by Twitter because the function will add ellipsis \"...\"\n    // to the end of the tweet to indicate that this tweet is breaking a\n    // sentence in the middle\n    const localTweetLength = TWEET_LENGTH - 3;\n\n    // Split the tweet into separate words and remove any empty elements from\n    // the array\n    const splitWords = sentence.split(\" \").filter((word) => word.length !== 0);\n\n    // A variable that will be used to build a tweet of a length less than or\n    // equal to the localTweetLength. This tweet will then be pushed to the\n    // output array of the split tweets, and the variable will be cleared for\n    // the next tweet\n    let currentTweet = \"\";\n\n    // The output array\n    let splitTweets = [];\n\n    for (const word of splitWords) {\n        // Ensure that the word is clear of any extra spaces\n        const currentWord = word.trim();\n\n        // If we encounter a word that is longer than the tweet length so it\n        // needs to be broken into separate tweets, then we push any text in\n        // the currentTweet variable to the output array and clear the variable\n        if (currentWord.length > TWEET_LENGTH) {\n            if (currentTweet.length > 0) {\n                splitTweets.push(`${currentTweet}...`);\n                currentTweet = \"\";\n            }\n\n            splitTweets = [...splitTweets, ...breakVeryLongWord(currentWord)];\n\n            continue;\n        }\n\n        if (currentTweet.length === 0) {\n            // When there is no text in the currentTweet variable, don't add\n            // a space before adding the currentWord\n            currentTweet += currentWord;\n        } else if (\n            currentTweet.length + currentWord.length + 1 <\n            localTweetLength\n        ) {\n            currentTweet += ` ${currentWord}`;\n        } else {\n            splitTweets.push(`${currentTweet}...`);\n\n            currentTweet = currentWord;\n        }\n    }\n\n    // If there is any text left over in the currentTweet that hasn't been\n    // pushed yet to the output array, push it\n    if (currentTweet.length > 0) {\n        splitTweets.push(currentTweet);\n    }\n\n    // Remove ellipsis from the last tweet. The reason we remove the ellipsis\n    // from the last tweet is that this function acts on complete sentences,\n    // so the last tweet in the array is not part of any sentence that comes\n    // after it. It is part of the thread, but it is not part of a broken\n    // sentence, so it doesn't need the ellipsis\n    const lastTweetIndex = splitTweets.length - 1;\n    splitTweets[lastTweetIndex] = removeEllipsisFromTweet(\n        splitTweets[lastTweetIndex]\n    );\n\n    return splitTweets;\n}\n\nexport function recombineShortTweets(threadArray) {\n    /**\n     * Takes an array of tweets and iterates over it combining any\n     * consecutive tweets that can fit in a single tweet\n     */\n\n    // The output array\n    let combinedTweets = [];\n\n    for (let i = 0; i < threadArray.length; i++) {\n        const curTweet = threadArray[i];\n\n        if (i === 0) {\n            combinedTweets.push(curTweet);\n\n            continue;\n        }\n\n        const lastTweetIndex = combinedTweets.length - 1;\n\n        // Get the last tweet making sure to clean it from ellipsis\n        // if it has them at the end to prepare it for the following\n        // tweet to be added if they can fit together in a single tweet\n        const lastTweet = removeEllipsisFromTweet(\n            combinedTweets[lastTweetIndex]\n        );\n\n        if (lastTweet.length + curTweet.length + 1 <= TWEET_LENGTH) {\n            // Replace the last tweet with the combination of last tweet\n            // and the current tweet\n            combinedTweets[lastTweetIndex] = `${lastTweet} ${curTweet}`;\n        } else {\n            combinedTweets.push(curTweet);\n        }\n    }\n\n    return combinedTweets;\n}\n\nfunction breakVeryLongWord(word) {\n    /**\n     * Takes any word longer than the maximum character\n     * count allowed for Twitter and splits it into several tweets.\n     * This allows the app to handle user input if the user decides to\n     * type long strings with no spaces in between.\n     */\n\n    if (word.length <= TWEET_LENGTH) {\n        return word;\n    }\n\n    // Define a tweet length that is 3 characters shorter than the maximum\n    // length allowed by Twitter because the function will add ellipsis \"...\"\n    // to the end of the tweet to indicate that this tweet is breaking a word\n    // in the middle\n    const localTweetLength = TWEET_LENGTH - 3;\n\n    // Get how many tweets are needed to include the entire word\n    const tweetCount = Math.ceil(word.length / localTweetLength);\n\n    let splitTweets = [];\n\n    for (let i = 0; i < tweetCount; i++) {\n        const sliceStart = i * localTweetLength;\n        const sliceEnd = (i + 1) * localTweetLength;\n\n        let outWord = word.slice(sliceStart, sliceEnd) + \"...\";\n\n        splitTweets.push(outWord);\n    }\n\n    return splitTweets;\n}\n\nfunction removeEllipsisFromTweet(tweet) {\n    /**\n     * Removes the ellipsis from the end of a tweet\n     */\n\n    const lastThreeCharacters = tweet.slice(tweet.length - 3);\n\n    if (lastThreeCharacters === \"...\") {\n        return tweet.slice(0, tweet.length - 3);\n    } else {\n        return tweet;\n    }\n}\n\n// Module functions exported mainly for testing purposes\nexport const msSplitter = {\n    breakVeryLongWord,\n    removeEllipsisFromTweet,\n    recombineShortTweets,\n};\n","import { TWEET_LENGTH } from \"../utils/generalConstants\";\nimport breakTextAtFullSentences from \"../utils/fullSentenceSplitter\";\nimport {\n    breakLongSentence,\n    recombineShortTweets,\n} from \"../utils/midSentenceSplitter\";\n\nexport default function splitTweet(thread) {\n    const cleanedThread = thread.trim();\n\n    // First, take care of user-defined splits\n    const userDefinedSplits = cleanedThread\n        .split(\"(---)\")\n        .map((tweet) => tweet.trim())\n        .filter((tweet) => tweet !== \"\");\n\n    // Return early if all tweets are shorter than the maximum allowed\n    // tweet length\n    if (allTweetsFitLength(userDefinedSplits)) {\n        return userDefinedSplits;\n    }\n\n    // Third, split the tweet at full sentences if the tweet is longer\n    // than the maximum length allowed\n    const fullSentencesSplit = userDefinedSplits\n        .map((tweet) => {\n            if (tweet.length <= TWEET_LENGTH) {\n                return tweet;\n            }\n\n            return breakTextAtFullSentences(tweet);\n        })\n        .flat()\n        .map((tweet) => tweet.trim());\n\n    // Return early if all tweets are shorter than the maximum allowed\n    // tweet length\n    if (allTweetsFitLength(fullSentencesSplit)) {\n        return fullSentencesSplit;\n    }\n\n    // Next, split any tweets that are still longer than the maximum\n    // allowed tweet length\n    const midSentenceSplit = fullSentencesSplit\n        .map((tweet) => {\n            if (tweet.length <= TWEET_LENGTH) {\n                return tweet;\n            }\n\n            return breakLongSentence(tweet);\n        })\n        .flat()\n        .map((tweet) => tweet.trim());\n\n    // Last, do a final pass going over the thread recombining any\n    // tweets that are too short\n    const output = recombineShortTweets(midSentenceSplit)\n        .flat()\n        .map((tweet) => tweet.trim());\n\n    return output;\n}\n\nfunction allTweetsFitLength(threadArray) {\n    /**\n     * Utility function that makes sure that the length of every tweet\n     * in an array is less than or equal to the defined tweet length\n     */\n\n    return threadArray.every((tweet) => tweet.length <= TWEET_LENGTH);\n}\n","import { UNTITLED_NAME } from \"./generalConstants\";\n\nexport function checkUserObject(userObj) {\n    return (\n        userObj !== null &&\n        isNotEmpty(userObj) &&\n        containsAllKeys(userObj, [\"name\", \"screenName\", \"profileImage\"]) &&\n        userObj.name !== UNTITLED_NAME\n    );\n}\n\nexport function isNotEmpty(obj) {\n    return Object.entries(obj).length > 0;\n}\n\nexport function containsAllKeys(obj, keysArr) {\n    const objKeys = Object.keys(obj);\n\n    for (const key of keysArr) {\n        if (!objKeys.includes(key)) {\n            return false;\n        }\n    }\n\n    return true;\n}\n","import axios from \"axios\";\nimport { SERVER } from \"../utils/generalConstants\";\n\nfunction sendAPIRequest(url, method, data = undefined) {\n    /**\n     * Utility function that makes a request to the backend\n     * sending along any data that is passed as an argument.\n     */\n\n    return axios({\n        url: url,\n        method: method,\n        withCredentials: true,\n        baseURL: SERVER,\n        data: data ? data : {},\n    });\n}\n\nexport function login() {\n    /**\n     * Call the login route\n     */\n\n    return sendAPIRequest(\"/request_token\", \"get\");\n}\n\nexport function logout() {\n    /**\n     * Call the logout route\n     */\n\n    return sendAPIRequest(\"/logout\", \"get\");\n}\n\nexport function publishAllTweetImages(files) {\n    return new Promise((resolve, reject) => {\n        const promises = files.map((file) => publishMedia(file));\n\n        Promise.all(promises)\n            .then((results) => {\n                const output = results.map(\n                    (response) => response.data.media_id\n                );\n\n                resolve(output);\n            })\n            .catch((err) => {\n                reject(err);\n            });\n    });\n}\n\nfunction publishMedia(file) {\n    const data = new FormData();\n\n    data.append(\"mediaFile\", file);\n\n    return sendAPIRequest(\"/upload_media\", \"post\", data);\n}\n\nexport function publishThread(thread) {\n    /**\n     * Call the publish_thread route\n     */\n\n    return sendAPIRequest(\"/publish_thread\", \"post\", { tweets: thread });\n}\n","function getStorage(name) {\n    /**\n     * Returns either the window's localStorage or sessionStorage\n     * depending on the name passed by the user.\n     *\n     * If the name is invalid, then it returns undefined.\n     */\n\n    if (name === \"local\") {\n        return localStorage;\n    } else if (name === \"session\") {\n        return sessionStorage;\n    } else {\n        return undefined;\n    }\n}\n\nexport function setStorageItem(storeName, itemName, itemValue) {\n    /**\n     * A thin wrapper around the setItem method which converts any\n     * object passed to it in the itemValue argument to a string\n     * that can be saved in the storage.\n     */\n\n    const storage = getStorage(storeName);\n\n    if (storage) {\n        storage.setItem(itemName, JSON.stringify(itemValue));\n    }\n}\n\nexport function getStorageItem(storeName, itemName) {\n    /**\n     * A thin wrapper around the setItem method which converts the\n     * string representation of the value stored in the item into\n     * a Javascript object.\n     */\n\n    const storage = getStorage(storeName);\n\n    if (storage) {\n        return JSON.parse(storage.getItem(itemName));\n    }\n}\n","import { useState, useEffect, useCallback, createRef } from \"react\";\nimport { makeStyles, ThemeProvider } from \"@material-ui/core/styles\";\nimport classNames from \"classnames\";\nimport queryString from \"query-string\";\nimport darkTheme from \"./themes/threadder-dark-theme\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Container from \"@material-ui/core/Container\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Hidden from \"@material-ui/core/Hidden\";\nimport Header from \"./components/Header\";\nimport TweetInput from \"./components/TweetInput\";\nimport ThreadViewer from \"./components/ThreadViewer\";\nimport MessagesDialog from \"./components/MessagesDialog\";\nimport CustomAlert from \"./components/CustomAlert\";\nimport splitTweet from \"./controllers/tweetSplitter\";\nimport { checkUserObject } from \"./utils/objectIntegrityCheckers\";\nimport {\n    login,\n    logout,\n    publishAllTweetImages,\n    publishThread,\n} from \"./controllers/APICalls\";\nimport { setStorageItem, getStorageItem } from \"./controllers/storageWrappers\";\nimport { insertIntoText } from \"./controllers/textManip\";\nimport {\n    openDB,\n    dbConnected,\n    clearImagesFromDB,\n    getAllImagesFromDB,\n} from \"./controllers/db\";\nimport {\n    UNTITLED_NAME,\n    UNTITLED_SCREEN_NAME,\n    UNTITLED_PROFILE_IMAGE,\n} from \"./utils/generalConstants\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        /**\n         * Styles that apply to the main Container component of the App\n         */\n        height: \"100vh\",\n        maxHeight: \"100vh\",\n    },\n    gridContainer: {\n        /**\n         * A class for the main grid layout of the App. It organises all\n         * the main elements of the App in a column layout.\n         */\n        flexFlow: \"column nowrap\",\n        height: \"100%\",\n    },\n    appHeader: {\n        flex: 0,\n    },\n    appView: {\n        flex: 1,\n        [theme.breakpoints.up(\"md\")]: {\n            display: \"flex\",\n            flexFlow: \"row nowrap\",\n            gap: theme.spacing(1.5),\n        },\n    },\n    mainArea: {\n        height: \"100%\",\n    },\n    hiddenOverflow: {\n        overflow: \"hidden\",\n    },\n}));\n\nexport default function App(props) {\n    const classes = useStyles();\n\n    const untitledUser = {\n        name: UNTITLED_NAME,\n        screenName: UNTITLED_SCREEN_NAME,\n        profileImage: UNTITLED_PROFILE_IMAGE,\n    };\n\n    /* APP STATE */\n    // Technically, this state is not required and it is\n    // not used by anything else. The only reason it exists\n    // is because it is used as a dependency for a useEffect\n    // hook that opens the database when the app first\n    // starts. Without having a dependency for the hook, it\n    // will keep running for every render, which means it\n    // will go nonstop trying to open the database.\n    const [dbOpen, setDBOpen] = useState(false);\n\n    const [alertVisibility, setAlertVisibility] = useState(false);\n    const [alertSeverity, setAlertSeverity] = useState(\"error\");\n    const [alertMessage, setAlertMessage] = useState(\"\");\n\n    // Feedback dialog states\n    const [dialogOpen, setDialogOpen] = useState(false);\n    const [dialogMessage, setDialogMessage] = useState(\n        \"This is an empty dialog\"\n    );\n\n    const [loggedIn, setLoggedIn] = useState(\n        getStorageItem(\"session\", \"loggedIn\") || false\n    );\n    const [user, setUser] = useState(\n        getStorageItem(\"session\", \"user\") || untitledUser\n    );\n    const [tweetText, setTweetText] = useState(\n        getStorageItem(\"session\", \"tweetText\") || \"\"\n    );\n    const [cursorPosition, setCursorPosition] = useState({\n        start: tweetText.length,\n        end: tweetText.length,\n    });\n    const [scrollPosition, setScrollPosition] = useState(0);\n    const [thread, setThread] = useState([]);\n    const [editing, setEditing] = useState(true);\n    /* END APP STATE */\n\n    /* COMPONENT REFS */\n    // createRef is used rather than useRef because the ref is\n    // being forwarded, and useRef doesn't seem to allow for\n    // ref forwarding.\n    const tweetInputRef = createRef();\n    /* END COMPONENT REFS */\n\n    /* EVENT HANDLERS AND FUNCTIONS */\n    const updateTweet = (event) => {\n        /**\n         * Handles user input in the textarea where the user\n         * types the tweet they want to split into a thread.\n         */\n\n        const text = event.target.value;\n\n        setTweetText(text);\n\n        setCursorPosition({\n            start: event.target.selectionStart,\n            end: event.target.selectionEnd,\n        });\n    };\n    const updateCursorPosition = (event) => {\n        /**\n         * Updates the cursor position state whenever the user\n         * changes the cursor position in the tweet input\n         * textarea.\n         */\n\n        const start = event.target.selectionStart;\n        const end = event.target.selectionEnd;\n\n        setCursorPosition({ start, end });\n    };\n    const insertTextAtCursor = (text) => {\n        /**\n         * Inserts any text passed to it at the current cursor\n         * position in the tweet text displayed in the input\n         * area.\n         */\n\n        const [updatedText, newPos] = insertIntoText(\n            tweetText,\n            cursorPosition,\n            text\n        );\n\n        setCursorPosition({ start: newPos, end: newPos });\n\n        setTweetText(updatedText);\n    };\n    const insertEmoji = (emoji) => {\n        /**\n         * Event handler for the emoji picker. It inserts the\n         * selected emoji at the current cursor position in\n         * the tweet text.\n         */\n\n        insertTextAtCursor(emoji.native);\n    };\n    const addSplit = () => {\n        /**\n         * Event handler for the split text toolbar button\n         * which adds a user defined split at the current\n         * cursor position in the tweet text.\n         */\n\n        insertTextAtCursor(\"\\n(---)\\n\");\n    };\n    const clearTweet = () => {\n        /**\n         * Event handler for the clear tweet toolbar button.\n         */\n\n        setTweetText(\"\");\n    };\n    const toggleEditing = () => {\n        /**\n         * Handles switching between editing the tweet and\n         * viewing the thread when the app is used on mobile\n         * phones\n         */\n\n        setEditing(!editing);\n    };\n    const displayAlert = useCallback((level, message) => {\n        /**\n         * Displays an alert in the UI using the severity level and\n         * the message specified.\n         *\n         * Defined as a useCallback hook, to allow using it as\n         * a dependency for useEffect hooks.\n         */\n        setAlertVisibility(true);\n\n        setAlertSeverity(level);\n\n        setAlertMessage(message);\n    }, []);\n    const loginHandler = () => {\n        /**\n         * Event handler for the Login button\n         */\n\n        showDialog(\"Please wait while we try to log you into your account\");\n\n        login()\n            .then((response) => {\n                document.location.href = response.data.redirect;\n            })\n            .catch((err) => {\n                console.log(err);\n\n                const errorMessage =\n                    typeof err === \"string\" ? err : \"Login failed\";\n\n                displayAlert(\"error\", errorMessage);\n            })\n            .finally(closeDialog);\n    };\n    const logoutHandler = () => {\n        /**\n         * Event handler for the Logout button\n         */\n\n        logout()\n            .then(() => {\n                displayAlert(\"success\", \"You are now logged out\");\n\n                setLoggedIn(false);\n                setUser(untitledUser);\n            })\n            .catch((err) => {\n                console.log(err);\n\n                const errorMessage =\n                    typeof err === \"string\" ? err : \"Logout failed\";\n\n                displayAlert(\"error\", errorMessage);\n            });\n    };\n    const publishTweets = useCallback(async () => {\n        /**\n         * A helper function that handles calling the function\n         * that sends the thread to the backend and clears the\n         * tweet input textarea if the thread was published\n         * successfully.\n         */\n\n        showDialog(\"Hold tight while we publish your thread\");\n\n        const toPublish = thread.map((tweet) => ({ text: tweet, media: [] }));\n\n        try {\n            const allImages = await getAllImagesFromDB();\n\n            if (allImages instanceof Array && allImages.length > 0) {\n                for (const tweetImages of allImages) {\n                    const index = Number(tweetImages.tweetIndex);\n\n                    const mediaIDs = await publishAllTweetImages(\n                        tweetImages.files\n                    );\n\n                    toPublish[index].media = mediaIDs;\n                }\n            }\n        } catch {\n            closeDialog();\n\n            displayAlert(\n                \"error\",\n                \"Thread publishing was cancelled because publishing the images failed\"\n            );\n\n            return;\n        }\n\n        publishThread(toPublish)\n            .then(() => {\n                displayAlert(\"success\", \"Thread published successfully\");\n\n                setTweetText(\"\");\n            })\n            .catch((err) => {\n                console.log(err);\n\n                const errorMessage =\n                    typeof err === \"string\"\n                        ? err\n                        : \"Failed to publish your thread\";\n\n                displayAlert(\"error\", errorMessage);\n            })\n            .finally(closeDialog);\n    }, [thread, displayAlert]);\n    const showDialog = (message) => {\n        /**\n         * Opens the modal dialog with the specified message.\n         */\n\n        setDialogMessage(message);\n        setDialogOpen(true);\n    };\n    const closeDialog = () => {\n        /**\n         * Closes the modal dialog.\n         */\n\n        setDialogOpen(false);\n    };\n    const publishThreadHandler = () => {\n        /**\n         * Handles the click event of the Publish Thread button.\n         * If the user is already logged in, then it just publishes\n         * the thread. Otherwise, it sets the publishAfterLogin\n         * item in the sessionStorage to true and initiates the\n         * login process.\n         *\n         * The publishAfterLogin sessionStorage item determines\n         * whether the application needs to publish a thread after\n         * the user logs in successfully.\n         */\n\n        if (loggedIn) {\n            publishTweets();\n        } else {\n            setStorageItem(\"session\", \"publishAfterLogin\", true);\n\n            loginHandler();\n        }\n    };\n    /* END EVENT HANDLERS AND FUNCTIONS */\n\n    /* SIDE EFFECTS */\n    // Runs when the app loads and tries to open the database.\n    useEffect(() => {\n        if (!dbOpen) {\n            openDB()\n                .then(() => {\n                    setDBOpen(true);\n                })\n                .catch((err) => {\n                    displayAlert(\"error\", err);\n                });\n        }\n    }, [dbOpen, displayAlert]);\n\n    // When the backend redirects to the app, set the user to logged\n    // in if the process was successful. It also sets some values in\n    // the session storage for the alerts that will need to be displayed\n    // in the UI once the login attempt is complete\n    useEffect(() => {\n        if (document.location.search !== \"\") {\n            const user = queryString.parse(document.location.search);\n\n            document.location.href = \"/\";\n\n            if (checkUserObject(user)) {\n                setLoggedIn(true);\n                setUser(user);\n\n                setStorageItem(\"session\", \"loginSuccessMessage\", true);\n            } else {\n                setStorageItem(\"session\", \"loginFailMessage\", true);\n            }\n        }\n    }, []);\n\n    // Once a login attempt is complete and the app reloads, check\n    // the session store to display the appropriate alert depending\n    // on whether the attempt was successful or not\n    useEffect(() => {\n        if (getStorageItem(\"session\", \"loginSuccessMessage\")) {\n            setStorageItem(\"session\", \"loginSuccessMessage\", false);\n\n            displayAlert(\"success\", \"You are now logged in\");\n        } else if (getStorageItem(\"session\", \"loginFailMessage\")) {\n            setStorageItem(\"session\", \"loginFailMessage\", false);\n\n            displayAlert(\"error\", \"Login failed\");\n        }\n    }, [displayAlert]);\n\n    // If a login attempt was completed successfully as a result of\n    // the user clicking the Publish Thread button, then complete\n    // publishing the thread\n    useEffect(() => {\n        if (\n            document.location.search === \"\" &&\n            thread.length > 0 &&\n            loggedIn &&\n            getStorageItem(\"session\", \"publishAfterLogin\")\n        ) {\n            let timeout, interval;\n\n            // Ensure database is connected before attempting to\n            // publish the thread\n            interval = setInterval(() => {\n                if (dbOpen) {\n                    clearInterval(interval);\n                    clearTimeout(timeout);\n\n                    setStorageItem(\"session\", \"publishAfterLogin\", false);\n\n                    publishTweets();\n                }\n            }, 500);\n\n            // Cancel publishing attempt if the database isn't\n            // connected after 5 seconds\n            timeout = setTimeout(() => {\n                clearInterval(interval);\n\n                displayAlert(\n                    \"error\",\n                    \"Publishing the thread failed because the database isn't connected\"\n                );\n            }, 5000);\n        }\n    }, [thread, loggedIn, dbOpen, publishTweets, displayAlert]);\n\n    // On every update, make sure that the TweetInput area has its\n    // cursor in the correct place. This is to ensure that, when the\n    // user adds an emoji or a user defined split in the middle of any\n    // text that already exists, the cursor doesn't jump to the end\n    useEffect(() => {\n        if (tweetInputRef.current) {\n            tweetInputRef.current.selectionStart = cursorPosition.start;\n            tweetInputRef.current.selectionEnd = cursorPosition.end;\n        }\n    });\n\n    // Give focus to the tweet input area on page load and whenever\n    // the tweet input is re-rendered\n    useEffect(() => {\n        if (tweetInputRef.current) {\n            tweetInputRef.current.focus();\n        }\n    }, [tweetInputRef]);\n\n    // Update the session storage when the logged in state changes\n    useEffect(() => {\n        setStorageItem(\"session\", \"loggedIn\", loggedIn);\n    }, [loggedIn]);\n\n    // Update the session storage when the user state changes\n    useEffect(() => {\n        setStorageItem(\"session\", \"user\", user);\n    }, [user]);\n\n    // When the tweet text is cleared, clear the stored images\n    // from the IndexedDB if the tweet length is 0.\n    // This runs in an interval until the connection to the\n    // database is successful, and then it clears the images.\n    // The reason we need to clear the images is that, all of\n    // the application state is persisted in the sessionStorage\n    // which is cleared automatically when the tab is closed.\n    // However, the images are persisted in the IndexedDB, which\n    // isn't cleared manually.\n    useEffect(() => {\n        let checkInterval;\n        let checkTimeout;\n\n        const clear = () => {\n            if (dbConnected()) {\n                clearInterval(checkInterval);\n\n                if (tweetText.length === 0) {\n                    clearImagesFromDB();\n                }\n            }\n        };\n\n        checkInterval = setInterval(clear, 20);\n\n        // Setup a 10 second timeout. If the database\n        // is still not connected after that, then\n        // there is probably some problem with it and\n        // it won't connect. This way, we won't keep\n        // checking for it and wasting resources\n        // unnecessarily.\n        if (!checkTimeout) {\n            checkTimeout = setTimeout(() => {\n                clearInterval(checkInterval);\n            }, 10000);\n        }\n    }, [tweetText]);\n\n    // When the tweetText is updated, update the thread state,\n    // store the tweetText in the sessionStorage to ensure\n    // it persists across reloads and\n    useEffect(() => {\n        if (tweetText.length === 0) {\n            setThread([]);\n        } else {\n            setThread(splitTweet(tweetText));\n        }\n\n        setStorageItem(\"session\", \"tweetText\", tweetText);\n    }, [tweetText]);\n\n    // When the thread is updated, store it in the sessionStorage\n    // to ensure it persists across reloads\n    // useEffect(() => {\n    //     setStorageItem(\"session\", \"thread\", thread);\n    // }, [thread]);\n\n    // When an alert is shown in the UI, start a timeout to hide\n    // it after a few seconds\n    useEffect(() => {\n        if (alertVisibility) {\n            let closeAlertTimeout;\n\n            if (closeAlertTimeout) {\n                clearTimeout(closeAlertTimeout);\n            }\n\n            closeAlertTimeout = setTimeout(() => {\n                setAlertVisibility(false);\n            }, 4000);\n\n            return () => clearTimeout(closeAlertTimeout);\n        }\n    }, [alertVisibility]);\n\n    // Update the scroll position of the Thread Viewer when the\n    // tweet text or the cursor position changes\n    useEffect(() => {\n        setScrollPosition(cursorPosition.end / tweetText.length);\n    }, [cursorPosition, tweetText]);\n    /* END SIDE EFFECTS */\n\n    return (\n        <ThemeProvider theme={darkTheme}>\n            <CssBaseline>\n                <CustomAlert\n                    visible={alertVisibility}\n                    severity={alertSeverity}\n                    msg={alertMessage}\n                />\n\n                <MessagesDialog open={dialogOpen} msg={dialogMessage} />\n\n                <Container className={classes.root}>\n                    <Grid\n                        container\n                        spacing={3}\n                        className={classes.gridContainer}\n                    >\n                        {/* App Header grid item */}\n                        <Grid item xs={12} className={classes.appHeader}>\n                            <Header\n                                user={user}\n                                loggedIn={loggedIn}\n                                login={loginHandler}\n                                logout={logoutHandler}\n                            />\n                        </Grid>\n\n                        {/* Grid item that holds both TweetInput and the ThreadViewer */}\n                        <Grid\n                            item\n                            xs={12}\n                            className={classNames(\n                                classes.appView,\n                                classes.hiddenOverflow\n                            )}\n                        >\n                            {/* TweetInput item which gets hidden in mobile views if not editing */}\n                            <Hidden smDown={!editing}>\n                                <Grid\n                                    item\n                                    xs={12}\n                                    md={7}\n                                    className={classNames(\n                                        classes.mainArea,\n                                        classes.hiddenOverflow\n                                    )}\n                                >\n                                    <TweetInput\n                                        tweetText={tweetText}\n                                        handleTweetInput={updateTweet}\n                                        handleCursorPositionChange={\n                                            updateCursorPosition\n                                        }\n                                        pickEmojiHandler={insertEmoji}\n                                        splitTweetHandler={addSplit}\n                                        clearTweetHandler={clearTweet}\n                                        thread={thread}\n                                        viewThreadHandler={toggleEditing}\n                                        ref={tweetInputRef}\n                                    />\n                                </Grid>\n                            </Hidden>\n\n                            {/* ThreadViewer item which gets hidden in mobile views when editing */}\n                            <Hidden smDown={editing}>\n                                <Grid\n                                    item\n                                    xs={12}\n                                    md={5}\n                                    className={classNames(\n                                        classes.mainArea,\n                                        classes.hiddenOverflow\n                                    )}\n                                >\n                                    <ThreadViewer\n                                        user={user}\n                                        thread={thread}\n                                        scroll={scrollPosition}\n                                        editThreadHandler={toggleEditing}\n                                        publishHandler={publishThreadHandler}\n                                        setAlertData={displayAlert}\n                                    />\n                                </Grid>\n                            </Hidden>\n                        </Grid>\n                    </Grid>\n                </Container>\n            </CssBaseline>\n        </ThemeProvider>\n    );\n}\n","export function insertIntoText(text, cursorObj, textToAdd) {\n    /**\n     * Takes a string, a cursor object, an object with start\n     * and end attributes, and another string that will be\n     * added to the first string between the start and end\n     * indices defined by the cursor object.\n     *\n     * Returns an array with the updated text and an updated\n     * cursor object.\n     */\n\n    const before = text.slice(0, cursorObj.start);\n    const after = text.slice(cursorObj.end);\n\n    const updatedText = before + textToAdd + after;\n\n    const newPos = cursorObj.start + textToAdd.length;\n\n    return [updatedText, newPos];\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n    window.location.hostname === \"localhost\" ||\n        // [::1] is the IPv6 localhost address.\n        window.location.hostname === \"[::1]\" ||\n        // 127.0.0.0/8 are considered localhost for IPv4.\n        window.location.hostname.match(\n            /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n        )\n);\n\nexport function register(config) {\n    if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n        // The URL constructor is available in all browsers that support SW.\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n        if (publicUrl.origin !== window.location.origin) {\n            // Our service worker won't work if PUBLIC_URL is on a different origin\n            // from what our page is served on. This might happen if a CDN is used to\n            // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n            return;\n        }\n\n        window.addEventListener(\"load\", () => {\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n            if (isLocalhost) {\n                // This is running on localhost. Let's check if a service worker still exists or not.\n                checkValidServiceWorker(swUrl, config);\n\n                // Add some additional logging to localhost, pointing developers to the\n                // service worker/PWA documentation.\n                navigator.serviceWorker.ready.then(() => {\n                    console.log(\n                        \"This web app is being served cache-first by a service \" +\n                            \"worker. To learn more, visit https://cra.link/PWA\"\n                    );\n                });\n            } else {\n                // Is not localhost. Just register service worker\n                registerValidSW(swUrl, config);\n            }\n        });\n    }\n}\n\nfunction registerValidSW(swUrl, config) {\n    navigator.serviceWorker\n        .register(swUrl)\n        .then((registration) => {\n            registration.onupdatefound = () => {\n                const installingWorker = registration.installing;\n                if (installingWorker == null) {\n                    return;\n                }\n                installingWorker.onstatechange = () => {\n                    if (installingWorker.state === \"installed\") {\n                        if (navigator.serviceWorker.controller) {\n                            // At this point, the updated precached content has been fetched,\n                            // but the previous service worker will still serve the older\n                            // content until all client tabs are closed.\n                            console.log(\n                                \"New content is available and will be used when all \" +\n                                    \"tabs for this page are closed. See https://cra.link/PWA.\"\n                            );\n\n                            // Execute callback\n                            if (config && config.onUpdate) {\n                                config.onUpdate(registration);\n                            }\n                        } else {\n                            // At this point, everything has been precached.\n                            // It's the perfect time to display a\n                            // \"Content is cached for offline use.\" message.\n                            console.log(\"Content is cached for offline use.\");\n\n                            // Execute callback\n                            if (config && config.onSuccess) {\n                                config.onSuccess(registration);\n                            }\n                        }\n                    }\n                };\n            };\n        })\n        .catch((error) => {\n            console.error(\"Error during service worker registration:\", error);\n        });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl, {\n        headers: { \"Service-Worker\": \"script\" },\n    })\n        .then((response) => {\n            // Ensure service worker exists, and that we really are getting a JS file.\n            const contentType = response.headers.get(\"content-type\");\n            if (\n                response.status === 404 ||\n                (contentType != null &&\n                    contentType.indexOf(\"javascript\") === -1)\n            ) {\n                // No service worker found. Probably a different app. Reload the page.\n                navigator.serviceWorker.ready.then((registration) => {\n                    registration.unregister().then(() => {\n                        window.location.reload();\n                    });\n                });\n            } else {\n                // Service worker found. Proceed as normal.\n                registerValidSW(swUrl, config);\n            }\n        })\n        .catch(() => {\n            console.log(\n                \"No internet connection found. App is running in offline mode.\"\n            );\n        });\n}\n\nexport function unregister() {\n    if (\"serviceWorker\" in navigator) {\n        navigator.serviceWorker.ready\n            .then((registration) => {\n                registration.unregister();\n            })\n            .catch((error) => {\n                console.error(error.message);\n            });\n    }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport * as serviceWorkerRegistration from \"./serviceWorkerRegistration\";\nimport \"./styles/index.css\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.querySelector(\"#root\")\n);\n\nserviceWorkerRegistration.register();\n"],"sourceRoot":""}