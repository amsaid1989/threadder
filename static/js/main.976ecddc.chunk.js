(this["webpackJsonpthreadder-frontend"]=this["webpackJsonpthreadder-frontend"]||[]).push([[0],{130:function(e,t,n){},131:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(9),i=n.n(c),o=n(18),l=n(36),s=n(166),u=n(176),d=n(11),h=n.n(d),f=n(76),m={main:"#283845",light:"#395164",dark:"#22303c",contrastText:"#ffffff",contrastText2:"#e5e5e5"},j={paper:m.light,default:"#202c39"},x=Object(f.a)({palette:{primary:m,secondary:{main:"#ffc107",light:"#ffd147",dark:"#c97d02",hover:"#ffa042",inactive:"#432a01",contrastText:"#14213d",inactiveText:"#111111"},background:j},spacing:4,shape:{borderRadius:2}}),p=n(177),g=n(173),b=n(172),O=n(181),w=n(170),v=n(171),y=n(134),T=n(38),N=n(167),C=n(2),S=Object(s.a)((function(e){return{styledButton:{"&:disabled":{color:e.palette.secondary.inactiveText,backgroundColor:e.palette.secondary.inactive},"&:hover":{backgroundColor:e.palette.secondary.hover}}}}));function I(e){var t=S(),n=h()(e.className,t.styledButton);return Object(C.jsx)(N.a,Object(T.a)(Object(T.a)({},e),{},{className:n}))}var k=n(178),F=n(169),L=n(182),H=n(179),z=Object(s.a)((function(e){return{menuList:{border:"solid 1px ".concat(e.palette.primary.dark)}}}));function W(e){var t={paper:z().menuList};return Object(C.jsx)(H.a,Object(T.a)({classes:t},e))}var A=n(184),E=n(73),G=n.n(E),R=n(74),B=n.n(R),U=n(75);n.n(U).a.config();var V=280,J="https://threadder-app.herokuapp.com/",_="Untitled User";function P(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return G()({url:e,method:t,withCredentials:!0,baseURL:J,data:n||{}})}function Z(e){var t,n;return new Promise((function(r,a){t=setInterval((function(){var a=function(e){try{return B.a.parse(e.location.search)}catch(t){}}(e);a&&(clearTimeout(n),clearInterval(t),r(a))}),2e3),n=setTimeout((function(){clearInterval(t),a("Login failed")}),3e4)}))}function q(e){return P("/request_token","get").then((function(t){var n,r=(n=t.data.redirect,window.open(n,"Login to Twitter","width=500,height=720,toolbar=no,status=no,menubar=no"));return Z(r).finally((function(){r.close(),e()}))}))}var D=Object(s.a)((function(e){return{menuList:{border:"solid 1px ".concat(e.palette.primary.dark)},menuItem:{color:e.palette.primary.contrastText,"&:hover":{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main}}}}));function M(e){var t=D(),n=Object(r.useState)(null),a=Object(o.a)(n,2),c=a[0],i=a[1],l=function(){i(null)};return Object(C.jsxs)(k.a,{children:[Object(C.jsx)(F.a,{size:"small",onClick:function(e){i(e.currentTarget)},children:Object(C.jsx)(L.a,{src:e.user.profileImage,alt:"".concat(e.user.name," profile picture")})}),Object(C.jsxs)(W,{id:"account-settings-menu",getContentAnchorEl:null,anchorEl:c,anchorReference:"anchorEl",anchorOrigin:{horizontal:"center",vertical:"bottom"},transformOrigin:{horizontal:"center",vertical:"top"},open:Boolean(c),onClose:l,autoFocus:!1,children:[Object(C.jsx)(A.a,{className:t.menuItem,onClick:function(){l();var t=e.user.screenName;window.open("https://twitter.com/".concat(t),"_blank")},children:"Go to Twitter"}),Object(C.jsx)(A.a,{className:t.menuItem,onClick:function(){l(),P("/logout","get").then((function(){e.setLoggedOutState()})).catch((function(e){console.log(e)}))},children:"Log out"})]})]})}var $=Object(s.a)((function(e){return{toolbar:{height:"1em",padding:"1em 1.5em"},title:{flexGrow:1}}}));function K(e){var t=$(),n=Object(C.jsx)(I,{variant:"contained",color:"secondary",onClick:e.login,children:"Log in"});return Object(C.jsx)(w.a,{position:"relative",children:Object(C.jsxs)(v.a,{className:t.toolbar,children:[Object(C.jsx)(y.a,{variant:"h5",className:t.title,children:"Threadder"}),e.loggedIn?Object(C.jsx)(M,{user:e.user,setLoggedOutState:e.setLoggedOutState}):n]})})}var Q=Object(s.a)((function(e){return{root:{flexFlow:"column nowrap"},fullHeight:{height:"100%"},containerWithShadow:{boxShadow:e.shadows[4]},expandingFlexItem:{flex:1},fixedSizeFlexItem:{flex:0},textareaContainer:{padding:"1.5em",backgroundColor:e.palette.primary.main},threadTextarea:{fontFamily:"inherit",fontSize:"inherit",resize:"none",width:"100%",padding:"0.5em 0.75em",color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,border:0,boxShadow:"inset 0px 0px 5px 0px rgba(0, 0, 0, 0.4)","&:focus":{border:0,outline:0}},statsContainer:{padding:"1em 1.5em",display:"flex",flexFlow:"row nowrap",justifyContent:"space-between",backgroundColor:e.palette.primary.dark},statsText:{color:e.palette.primary.contrastText2}}})),X=a.a.forwardRef((function(e,t){var n=Q();return Object(C.jsxs)(b.a,{container:!0,spacing:2,className:h()(n.root,n.fullHeight),children:[Object(C.jsx)(b.a,{item:!0,xs:12,className:h()(n.expandingFlexItem,n.fullHeight),children:Object(C.jsx)(g.a,{className:h()(n.textareaContainer,n.fullHeight,n.containerWithShadow),children:Object(C.jsx)("textarea",{className:h()(n.threadTextarea,n.fullHeight),onChange:e.handleTweetInput,placeholder:"Type your tweet here...",value:e.tweetText,ref:t})})}),Object(C.jsx)(b.a,{item:!0,xs:12,className:n.fixedSizeFlexItem,children:Object(C.jsxs)(g.a,{className:h()(n.statsContainer,n.containerWithShadow),children:[Object(C.jsx)(y.a,{variant:"body2",className:n.statsText,children:"Characters: ".concat(e.tweetText.length)}),Object(C.jsx)(y.a,{variant:"body2",className:n.statsText,children:"Tweets: ".concat(e.thread.length)})]})}),Object(C.jsx)(O.a,{mdUp:!0,children:Object(C.jsx)(b.a,{item:!0,xs:12,className:n.fixedSizeFlexItem,children:Object(C.jsx)(I,{variant:"contained",color:"secondary",fullWidth:!0,onClick:e.viewThreadHandler,children:"View thread"})})})]})})),Y=Object(s.a)((function(e){return{root:{marginBottom:"1.5em",flexFlow:"row nowrap","&:last-child":{marginBottom:0}},expandingFlexItem:{flex:1},fixedSizeFlexItem:{flex:0},verticalGrid:{display:"flex",flexFlow:"column nowrap"},centerVerticalGridItems:{alignItems:"center"},threadLineContainer:{padding:0},threadLine:{width:"2px",height:"calc(100% + 1.5em)",backgroundColor:e.palette.background.default},tweetContainer:{marginLeft:"1em"},resetFont:{fontFamily:"inherit",fontSize:"inherit"},defaultTextColor:{color:e.palette.primary.contrastText},userName:{fontWeight:"bold"},userHandle:{color:e.palette.primary.contrastText2,marginLeft:"0.5em"},tweetText:{padding:0,margin:0,marginTop:"0.25em",whiteSpace:"pre-wrap",overflowWrap:"break-word"},hiddenOverflow:{overflow:"hidden"}}}));function ee(e){var t=Y();return Object(C.jsxs)(b.a,{container:!0,className:t.root,children:[Object(C.jsxs)(b.a,{container:!0,className:h()(t.fixedSizeFlexItem,t.verticalGrid,t.centerVerticalGridItems),children:[Object(C.jsx)(b.a,{item:!0,children:Object(C.jsx)(L.a,{src:e.user.profileImage,alt:"".concat(e.user.name," profile picture")})}),e.threadLine&&Object(C.jsx)(b.a,{item:!0,className:h()(t.expandingFlexItem,t.threadLineContainer),children:Object(C.jsx)("div",{className:t.threadLine})})]}),Object(C.jsxs)(b.a,{container:!0,className:h()(t.expandingFlexItem,t.verticalGrid,t.tweetContainer,t.hiddenOverflow),children:[Object(C.jsxs)(b.a,{item:!0,children:[Object(C.jsx)("span",{className:h()(t.resetFont,t.defaultTextColor,t.userName),children:e.user.name}),Object(C.jsx)("span",{className:h()(t.resetFont,t.userHandle),children:"@".concat(e.user.screenName)})]}),Object(C.jsx)(b.a,{item:!0,children:Object(C.jsx)("p",{className:h()(t.resetFont,t.defaultTextColor,t.tweetText),children:e.text})})]})]})}var te=Object(s.a)((function(e){return{root:{flexFlow:"column nowrap"},fullHeight:{height:"100%"},containerWithShadow:{boxShadow:e.shadows[4]},expandingFlexItem:{flex:1},fixedSizeFlexItem:{flex:0},autoOverflow:{overflow:"auto"},hiddenOverflow:{overflow:"hidden"},tweetsContainer:{padding:"1.5em",backgroundColor:e.palette.primary.main},buttonRowContainer:{display:"flex",flexFlow:"row nowrap",justifyContent:"space-between",gap:"1em",margin:0,padding:0}}}));function ne(e){var t=te(),n=e.thread.map((function(t,n,r){return Object(C.jsx)(ee,{user:e.user,text:t,threadLine:n+1<r.length},t)}));return Object(C.jsxs)(b.a,{container:!0,spacing:2,className:h()(t.root,t.fullHeight,t.hiddenOverflow),children:[Object(C.jsx)(b.a,{item:!0,xs:12,className:h()(t.expandingFlexItem,t.fullHeight,t.hiddenOverflow),children:Object(C.jsx)(g.a,{className:h()(t.tweetsContainer,t.fullHeight,t.containerWithShadow,t.autoOverflow),children:n})}),Object(C.jsx)(b.a,{item:!0,xs:12,className:t.fixedSizeFlexItem,children:Object(C.jsxs)(g.a,{className:h()(t.buttonRowContainer,t.fullHeight),children:[Object(C.jsx)(O.a,{mdUp:!0,children:Object(C.jsx)(I,{variant:"contained",color:"secondary",fullWidth:!0,onClick:e.editThreadHandler,children:"Edit thread"})}),Object(C.jsx)(I,{variant:"contained",color:"secondary",onClick:e.publishHandler,disabled:!n.length>0,fullWidth:!0,children:"Publish thread"})]})})]})}var re=n(183),ae=n(174),ce=n(175),ie=Object(s.a)((function(e){return{dialogText:{color:e.palette.primary.contrastText,textAlign:"center"}}}));function oe(e){var t=ie();return Object(C.jsx)(re.a,{open:e.open,children:Object(C.jsx)(ae.a,{children:Object(C.jsx)(ce.a,{className:t.dialogText,children:e.msg})})})}function le(e){return e.replace(/^[ \t]*/,"").replace(/[ \t]*$/,"")}function se(e){return e.split(/(\n)/).filter((function(e,t,n){return"\n"!==e||"\n"===e&&"\n"!==n[t]}))}function ue(e){return e.split(/((?<!\svs?)(?<=\s\w+[a-zA-Z]+)\.(?=\s*[a-zA-Z]+\w*)|(?<=\d+[\s./-]\d+|\s\d+)\.(?=\s*\W*[a-zA-Z]+\w*\W*)|\.$)/g).map((function(e,t,n){return"."===n[t+1]?"".concat(e,"."):"."===e?"":e})).filter((function(e){return""!==e})).map((function(e){return le(e)}))}function de(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ";if(0===e.length)return[];for(var n=[],r=0;r<e.length;r++)if(0!==r){var a=n.length-1,c=n[a],i=e[r];c.length<=70||c.length+i.length<=V?(c+=i.startsWith("\n")?i:"".concat(t).concat(i),n[a]=c):n.push(e[r])}else n.push(e[r]);return n}var he=n(55),fe=n(49);function me(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(0!==n){var a=t.length-1,c=xe(t[a]);c.length+r.length+1<=V?t[a]="".concat(c," ").concat(r):t.push(r)}else t.push(r)}return t}function je(e){if(e.length<=V)return e;for(var t=Math.ceil(e.length/277),n=[],r=0;r<t;r++){var a=277*r,c=277*(r+1),i=e.slice(a,c)+"...";n.push(i)}return n}function xe(e){return"..."===e.slice(e.length-3)?e.slice(0,e.length-3):e}function pe(e){var t=e.trim().split("(---)").map((function(e){return e.trim()})).filter((function(e){return""!==e}));if(ge(t))return t;var n=t.map((function(e){return e.length<=V?e:function(e){var t=de(se(e),"\n");return t.every((function(e){return e.length<=V}))?t:de(t.map((function(e){return e.length<=V?e:ue(e)})).flat().map((function(e){return e.trim()})))}(e)})).flat().map((function(e){return e.trim()}));return ge(n)?n:me(n.map((function(e){return e.length<=V?e:function(e){if(e.length<=V)return e;var t,n=e.split(" ").filter((function(e){return 0!==e.length})),r="",a=[],c=Object(fe.a)(n);try{for(c.s();!(t=c.n()).done;){var i=t.value.trim();i.length>V?(r.length>0&&(a.push("".concat(r,"...")),r=""),a=[].concat(Object(he.a)(a),Object(he.a)(je(i)))):0===r.length?r+=i:r.length+i.length+1<277?r+=" ".concat(i):(a.push("".concat(r,"...")),r=i)}}catch(l){c.e(l)}finally{c.f()}r.length>0&&a.push(r);var o=a.length-1;return a[o]=xe(a[o]),a}(e)})).flat().map((function(e){return e.trim()}))).flat().map((function(e){return e.trim()}))}function ge(e){return e.every((function(e){return e.length<=V}))}function be(e){return null!==e&&(t=e,Object.entries(t).length>0)&&function(e,t){var n,r=Object.keys(e),a=Object(fe.a)(t);try{for(a.s();!(n=a.n()).done;){var c=n.value;if(!r.includes(c))return!1}}catch(i){a.e(i)}finally{a.f()}return!0}(e,["name","screenName","profileImage"])&&e.name!==_;var t}function Oe(e,t){sessionStorage.setItem(e,JSON.stringify(t))}function we(e){return JSON.parse(sessionStorage.getItem(e))}var ve=Object(s.a)((function(e){return{root:Object(l.a)({height:"100vh",maxHeight:"100vh"},e.breakpoints.down("sm"),{height:"93vh",maxHeight:"93vh"}),gridContainer:{flexFlow:"column nowrap",height:"100%"},appHeader:{flex:0},appView:Object(l.a)({flex:1},e.breakpoints.up("md"),{display:"flex",flexFlow:"row nowrap",gap:e.spacing(1.5)}),mainArea:{height:"100%"},hiddenOverflow:{overflow:"hidden"},loggedInSuccess:{color:e.palette.primary.contrastText,textAlign:"center",fontWeight:"normal"}}}));function ye(e){var t=ve(),n={name:_,screenName:"untitled_user",profileImage:""},a=Object(r.useState)(!1),c=Object(o.a)(a,2),i=c[0],l=c[1],s=Object(r.useState)("This is an empty dialog"),d=Object(o.a)(s,2),f=d[0],m=d[1],j=Object(r.useState)(!1),w=Object(o.a)(j,2),v=w[0],y=w[1],T=Object(r.useState)(we("loggedIn")||!1),N=Object(o.a)(T,2),S=N[0],I=N[1],k=Object(r.useState)(we("user")||n),F=Object(o.a)(k,2),L=F[0],H=F[1],z=Object(r.useState)(we("tweetText")||""),W=Object(o.a)(z,2),A=W[0],E=W[1],G=Object(r.useState)([]),R=Object(o.a)(G,2),B=R[0],U=R[1],V=Object(r.useState)(!0),J=Object(o.a)(V,2),Z=J[0],D=J[1],M=Object(r.createRef)(),$=function(){D(!Z)},Q=function(){y(!1)},Y=function(){re("Please wait while we try to log you into your account"),q(Q).then((function(e){be(e)&&(I(!0),H(e),ee())})).catch((function(e){return console.log(e)})).finally(ae)},ee=function(){we("publishAfterLogin")&&(Oe("publishAfterLogin",!1),te())},te=function(){re("Hold tight while we publish your thread"),function(e){return P("/publish_thread","post",{tweets:e})}(B).then((function(){E("")})).catch((function(e){return console.log(e)})).finally(ae)},re=function(e){m(e),l(!0)},ae=function(){l(!1)};return Object(r.useEffect)((function(){""!==document.location.search&&y(!0)}),[]),Object(r.useEffect)((function(){be(we("user"))&&(I(!0),H(we("user")))}),[]),Object(r.useEffect)((function(){M.current&&M.current.focus()}),[M]),Object(r.useEffect)((function(){Oe("loggedIn",S)}),[S]),Object(r.useEffect)((function(){Oe("user",L)}),[L]),Object(r.useEffect)((function(){0===A.length?U([]):U(pe(A)),Oe("tweetText",A)}),[A]),Object(r.useEffect)((function(){Oe("thread",B)}),[B]),Object(C.jsx)(u.a,{theme:x,children:Object(C.jsxs)(p.a,{children:[Object(C.jsx)(oe,{open:i,msg:f}),v&&Object(C.jsx)(g.a,{className:t.root,children:Object(C.jsx)("h2",{className:t.loggedInSuccess,children:"Logged in successfully"})}),!v&&Object(C.jsx)(g.a,{className:t.root,children:Object(C.jsxs)(b.a,{container:!0,spacing:3,className:t.gridContainer,children:[Object(C.jsx)(b.a,{item:!0,xs:12,className:t.appHeader,children:Object(C.jsx)(K,{user:L,loggedIn:S,setLoggedOutState:function(){I(!1),H(n)},login:Y})}),Object(C.jsxs)(b.a,{item:!0,xs:12,className:h()(t.appView,t.hiddenOverflow),children:[Object(C.jsx)(O.a,{smDown:!Z,children:Object(C.jsx)(b.a,{item:!0,xs:12,md:7,className:h()(t.mainArea,t.hiddenOverflow),children:Object(C.jsx)(X,{tweetText:A,handleTweetInput:function(e){var t=e.target.value;E(t)},thread:B,viewThreadHandler:$,ref:M})})}),Object(C.jsx)(O.a,{smDown:Z,children:Object(C.jsx)(b.a,{item:!0,xs:12,md:5,className:h()(t.mainArea,t.hiddenOverflow),children:Object(C.jsx)(ne,{user:L,thread:B,editThreadHandler:$,publishHandler:function(){S?te():(Oe("publishAfterLogin",!0),Y())}})})})]})]})})]})})}n(130);i.a.render(Object(C.jsx)(a.a.StrictMode,{children:Object(C.jsx)(ye,{})}),document.querySelector("#root"))}},[[131,1,2]]]);
//# sourceMappingURL=main.976ecddc.chunk.js.map